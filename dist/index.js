import e from"colorjs.io";import"dayjs/locale/de";import"dayjs/locale/en";import t from"dayjs";import n from"dayjs/plugin/customParseFormat";import"dayjs/locale/en-gb";import r from"dayjs/plugin/isBetween";import i from"dayjs/plugin/isSameOrBefore";import a from"dayjs/plugin/relativeTime";import o from"dayjs/plugin/utc";import s from"svg-path-commander";const c=(e,t,n=!0)=>{if(t<1)throw Error(`n must be at least 1`);if(!Number.isInteger(t))throw TypeError(`n must be an integer`);let r=e.length;if(r===0)return[];if(t===1)return[e];if(t>=r)return e.map(e=>[e]);let i=[];if(n){let n=0,a=t;for(;a>0;){let t=r-n,o=Math.ceil(t/a);i.push(e.slice(n,n+o)),n+=o,a--}}else{let n=Math.floor(r/t),a=0;for(let r=0;r<t-1;r++)i.push(e.slice(a,a+n)),a+=n;i.push(e.slice(a))}return i},l=(e,t,n)=>{let r=Number(t),i=Number(n),a=Number(e);return Number.isNaN(a)||Number.isNaN(r)||Number.isNaN(i)?NaN:(r>i&&([r,i]=[i,r]),Math.min(Math.max(a,r),i))};var u=class e{static backgroundLightnessThreshold=.18;static chromaCurveFactor=4;static cieExponent=1/3;static cieMultiplierHigh=116;static cieMultiplierLow=903.2962962;static cieOffset=16;static cieThreshold=.0088564516;static hueShiftFactor=5;static lightnessContrastExponent=3.04;static lightnessContrastOffset=.05;static lightnessMax=1;static lightnessMin=0;static lightnessScaleFactor=100;static toeK1=.206;static toeK2=.03;static toeK3=(1+e.toeK1)/(1+e.toeK2);static applyToeCurve(t){let n=e.toeK3*t-e.toeK1;return .5*(n+Math.sqrt(n*n+4*e.toeK2*e.toeK3*t))}static yToLightness(t){return t<=e.cieThreshold?t*e.cieMultiplierLow:e.cieMultiplierHigh*t**+e.cieExponent-e.cieOffset}},d=class t{static colorSpace=`okhsl`;static hexFormat=`hex`;static hueMax=360;static hueMin=0;static lightnessMax=100;static lightnessMin=0;static outputColorSpace=`srgb`;static saturationMax=100;static saturationMin=0;get colourObject(){return this.#e}get h(){return this.#e.h??t.hueMin}set h(e){let n=Number(e);if(Number.isNaN(n)){console.warn(`${t.name}: Cannot set hue to invalid value "${e}" (${n}), keeping current value "${this.#e.h}"`);return}this.#e.h=(n%t.hueMax+t.hueMax)%t.hueMax}get hex(){return this.#e.to(t.outputColorSpace).toString({format:t.hexFormat})}get l(){return this.#e.l??t.lightnessMin}set l(e){let n=Number(e);if(Number.isNaN(n)){console.warn(`${t.name}: Cannot set lightness to invalid value "${e}" (${n}), keeping current value "${this.#e.l}"`);return}this.#e.l=l(n,t.lightnessMin,t.lightnessMax)}get s(){return this.#e.s??t.saturationMin}set s(e){let n=Number(e);if(Number.isNaN(n)){console.warn(`${t.name}: Cannot set saturation to invalid value "${e}" (${n}), keeping current value "${this.#e.s}"`);return}this.#e.s=l(n,t.saturationMin,t.saturationMax)}#e;constructor(n){typeof n==`string`||n instanceof e?this.#e=new e(n).to(t.colorSpace):this.#e=new e({coords:n,space:t.colorSpace})}static mix(n,r,i){return new t(e.mix(n.colourObject,r.colourObject,i,{outputSpace:t.colorSpace,space:t.colorSpace}))}clone(){return new t(this.#e)}toString(){return this.hex}},f=class{#e;#t;#n;#r;#i;constructor(e,t,n,r,i){this.#r=e,this.#t=t,this.#i=n,this.#n=r,this.#e=i}computeColour(e){let t=this.#c(e),n=l(this.#s(t)/u.lightnessScaleFactor,u.lightnessMin,u.lightnessMax);return new d([this.#o(t),this.#a(t),n])}#a(e){let t=this.#n-this.#i,n=-u.chromaCurveFactor*t,r=u.chromaCurveFactor*t;return n*e**2+r*e+this.#i}#o(e){return this.#t+u.hueShiftFactor*(1-e)}#s(e){let t=Math.exp(u.lightnessContrastExponent*e),n=this.#e+u.lightnessContrastOffset,r=this.#e>u.backgroundLightnessThreshold?n/t-u.lightnessContrastOffset:t*n-u.lightnessContrastOffset;return u.applyToeCurve(u.yToLightness(r))}#c(e){return e/this.#r}},ee=class e{static defaultBaseTint=40;static defaultHarmonizationMix=80;static fallbackHue=0;static fallbackLightness=0;static fallbackSaturation=1;static maxSaturation=.25;static maxSaturationNeutral=.2;static maxTone=100;static minSaturation=0;static neutralHarmonizationMix=0;static onDarkBase=`#fff`;static onDarkMixAmount=5;static onLightBase=`#000`;static onLightMixAmount=40;static percentageScale=100;get baseTint(){return this.#t}get onDark(){return this.#n}get onLight(){return this.#r}#e;#t;#n;#r;constructor(t,n=e.defaultBaseTint){this.#e=new d(t),this.#t=n,this.#n=this.colourMixin(new d(e.onDarkBase),e.onDarkMixAmount),this.#r=this.colourMixin(new d(e.onLightBase),e.onLightMixAmount)}colourMixin(t,n=e.defaultHarmonizationMix){let r=typeof t==`string`?new d(t):t,i=new d([r.h,this.#e.s,this.#e.l]);return this.mixColours(i,r,e.percentageScale-n)}getBaseTintedColour(e){return this.getTint(new d(e),this.#t)}getColourAtTint(t,n,r,i=!1){let a=e.maxTone-t,o=n.h,s=n.s,c=i?e.maxSaturationNeutral:Math.max(e.maxSaturation,s),l=1-r.l;return new f(e.maxTone,o,e.minSaturation,c,l).computeColour(a)}getHarmonisedColour(e,t){let n=this.colourMixin(new d(e),t);return this.getTint(n,this.#t)}getHarmonisedColourNeutral(t){let n=this.colourMixin(new d(t),e.neutralHarmonizationMix);return this.getTint(n,this.#t,this.#r,!0)}getTint(e,t,n=this.#r,r=!1){return this.getColourAtTint(t,e,n,r)}mixColours(t,n,r=this.#t){let i=r/e.percentageScale;return d.mix(t,n,i)}};const p=`YYYY-MM-DD HH:mm`;let m=`en-GB`;const h=[],g=e=>{if(m!==e){m=e;for(let e of h)e()}},_=()=>m,v=e=>{h.push(e)},te=String.fromCodePoint(8212),y=String.fromCodePoint(8211),ne=String.fromCodePoint(8210),b=String.fromCodePoint(8722),x=String.fromCodePoint(43),re=String.fromCodePoint(65122),S=String.fromCodePoint(8199),C=String.fromCodePoint(8239),w=String.fromCodePoint(160),T=String.fromCodePoint(8200),E=String.fromCodePoint(8201),ie=String.fromCodePoint(65279),ae=String.fromCodePoint(776),oe=String.fromCodePoint(9675);t.extend(a),t.extend(n),t.extend(r),t.extend(i),t.extend(a),t.extend(o);const D=e=>{g(e),t.locale(e)};v(()=>{t.locale(_())}),D(`en-GB`);const se=(e,n)=>{let r=n??_();return t(e).locale(r).format(`dddd, D. MMMM, H.mm`)},ce=(e,n)=>{let r=n??_();return t(e).locale(r).format(`D.M. H.mm`)},le=(e,n)=>{let r=n??_();return t(e).locale(r).format(`D. MMMM H.mm.ss`)},ue=(e,n)=>{let r=n??_();return t(e).locale(r).fromNow()},de=e=>t().isBefore(e),fe=e=>{if(e.length===0)return;let n=t(),r=e.map(e=>Math.abs(n.diff(e)));return r.indexOf(Math.min(...r))},pe=e=>t.utc(e,p).fromNow(),me=e=>t.utc(e,p).isSameOrBefore(t.utc()),he=e=>t.utc(e,p).format(p),ge=e=>t.utc(e,p).format(`H:mm`),_e=e=>t.utc(e,p).local().format(p),ve=e=>t.utc(e,p).local().format(`H:mm`),ye=(e,n,r)=>e?t(e,p).isBetween(n,r,`hour`,`(]`):!1,be=e=>({begin:t(e[0]),end:t(e.at(-1))}),O=e=>Number(t.utc().hour(e).local().format(`H`)),k=(e,t)=>`<span class="text-no-wrap">${e}${w}${y}${w}${t}</span>`,xe=(e,t)=>{let n=O(e),r=O(t);return`${k(e,t)} (${k(n,r)}${w}local)`};t.extend(o);const A=621355968000000000n,j=10000n,M=e=>{let n=N(e);return t.utc(n).format(`YYYY-MM-DD HH:mm`)},Se=e=>{let n=(BigInt(e)-A)/j;return t.utc(Number(n))},Ce=e=>BigInt(typeof e==`number`?e:e.valueOf())*j+A,N=e=>{let t=(BigInt(e)-A)/j;return Number(t)},we=async e=>await new Promise(t=>setTimeout(t,e)),P=new Map,F=e=>{let t=P.get(e);return t||(t=new Intl.PluralRules(e,{type:`cardinal`}),P.set(e,t)),t},I=(e,t)=>t?`<tspan class="caps">${e}</tspan>`:`<span class="caps">${e}</span>`,L=(e,t)=>E+e.replace(`K`,I(`k`,t)).replace(`M`,I(`m`,t)),R=(e,t=!1)=>{if(e===e.toLowerCase())return e;let n=t?`tspan`:`span`;return e.length>1?`<${n} class="caps">${e}</${n}>`:`<${n} style="font-variant-caps: all-small-caps">${e}</${n}>`},z=(e,t,n=!1)=>new Intl.NumberFormat(_(),t).formatToParts(e).map(e=>{switch(e.type){case`compact`:return L(e.value,n);case`currency`:return e.value;case`decimal`:return e.value;case`fraction`:return e.value;case`group`:return E;case`integer`:return e.value;case`literal`:return e.value;case`minusSign`:return`${b}${C}`;case`percentSign`:return`${C}%`;case`plusSign`:return`${x}${C}`;case`unit`:return e.value}return e.value}).join(``),B=(e,t=2,n={},r=!1)=>z(e,{maximumFractionDigits:t,...n,style:`decimal`},r),V=(e,t=2,n={},r=!1)=>B(e,t,n,r),Te=(e,t=2)=>V(e,t,{signDisplay:`always`}),H=(e,t=!1)=>V(e,2,{maximumSignificantDigits:2,notation:`compact`},t),Ee=(e,t=2)=>V(e,t,{minimumFractionDigits:t}).replace(/\.00$/,T+S+S).replace(/\.0$/,T+S).replaceAll(/\.(\d)0$/g,`.$1${S}`),U=(e,t)=>`${H(e)}${C}${R(t)}`,De=e=>`${R(`R`)}${C}${H(e)}`,Oe=e=>U(e,`t`),W=(e,t=0)=>Number(V(e,t)),ke=e=>W(e,3),G=(e,t={})=>B(e,0,t),Ae=e=>G(e,{signDisplay:`always`}),je=(e,t=2,n={})=>B(e,0,{...n,maximumSignificantDigits:t}),K=new Map,Me=e=>{let t=K.get(e);return t||(t=new Intl.PluralRules(e,{type:`ordinal`}),K.set(e,t)),t},Ne=new Map([[`few`,`rd`],[`one`,`st`],[`other`,`th`],[`two`,`nd`]]),q=new Map([[`few`,`ʳᵈ`],[`one`,`ˢᵗ`],[`other`,`ᵗʰ`],[`two`,`ⁿᵈ`]]),Pe=(e,t=!0,n)=>{let r=Me(n??_()).select(e);return`${e}${(t?q.get(r):Ne.get(r))??``}`},J=(e,t=1,n={})=>z(e,{maximumFractionDigits:t,...n,style:`percent`}),Fe=(e,t=1)=>J(e,t,{signDisplay:`always`}),Ie=(e,t=0)=>J(e,t).replace(`%`,`pp`),Le=(e,t)=>{if(!e)return e;let n=t??_();return e.charAt(0).toLocaleUpperCase(n)+e.slice(1)},Re=(e,t,n)=>F(_()).select(e)===`one`?t:n,Y=e=>{let t=e.getBoundingClientRect();return{bottom:Math.floor(t.bottom),height:Math.floor(t.height),left:Math.floor(t.left),right:Math.floor(t.right),top:Math.floor(t.top),width:Math.floor(t.width),x:Math.floor(t.x),y:Math.floor(t.y)}},ze=e=>Y(e).height,Be=e=>Y(e).width,Ve=e=>{let{height:t,width:n}=Y(e);return{height:t,width:n}},He=e=>{let{height:t,width:n}=e.getBoundingClientRect();return{height:t,width:n}},Ue=(e,t,n,r=!0)=>{let i=Math.min(t,n),a=Math.max(t,n);return r?e>=i&&e<=a:e>i&&e<a},We=(e,t)=>{if(!(t.length<2))for(let n=0;n<t.length-1;n++){let r=t[n],i=t[n+1];if(r&&i&&e>=r.time&&e<=i.time)return[r,i]}},Ge=(e,t,n)=>{let r=n*n,i=r*n,a=2*i-3*r+1,o=i-2*r+n,s=-2*i+3*r,c=i-r;return a*e.value+o*e.tangentOut+s*t.value+c*t.tangentIn},X=(e,t)=>{if(t.length===0)throw Error(`Points array cannot be empty`);let n=t[0];if(!n)throw Error(`Points array cannot be empty`);if(t.length===1)return e===n.time?n.value:void 0;let r=We(e,t);if(!r)return;let[i,a]=r;return i.time===a.time?i.value:Ge(i,a,(e-i.time)/(a.time-i.time))},Ke=(e,t)=>{if(t.length===0)throw Error(`Points array cannot be empty`);let n=t[0];if(!n)throw Error(`Points array cannot be empty`);if(t.length===1||e<=n.time)return n.value;let r=t.at(-1);if(!r)throw Error(`Points array cannot be empty`);return e>=r.time?r.value:X(e,t)??r.value},qe=e=>{if(e<=0||!Number.isFinite(e))throw Error(`Value must be a positive finite number`);return 2**Math.floor(Math.log2(e))},Je=e=>{if(e<=0||!Number.isFinite(e))throw Error(`Value must be a positive finite number`);return 2**Math.ceil(Math.log2(e))},Ye=e=>{let t=String(e),n=t.startsWith(`-`);return{desc:n,key:n?t.slice(1):t}},Z=(e,t)=>e.localeCompare(t,void 0,{numeric:!0,sensitivity:`base`}),Q=e=>e==null,$=(e,t)=>{let n=Q(e),r=Q(t);if(n&&r)return 0;if(n)return 1;if(r)return-1},Xe=(e,t)=>{if(e===t)return 0;let n=$(e,t);if(n!==void 0)return n;let r=Number(e),i=Number(t);return Number.isFinite(r)&&Number.isFinite(i)?r-i:typeof e==`string`&&typeof t==`string`?Z(e,t):0},Ze=e=>(t,n)=>{for(let r of e){let{desc:e,key:i}=Ye(r),a=Xe(t[i],n[i]);if(a!==0)return e?-a:a}return 0};function Qe(e,t){let n=$(e,t);return n===void 0?e-t:n}function $e(e,t){let n=$(e,t);return n===void 0?Z(e,t):n}const et=(e,t,n)=>`M${e-n},${t}a${n},${n} 0 1,0 ${n*2},0a${n},${n} 0 1,0 ${-n*2},0`,tt=(e,t,n)=>{let r=n/2;return`M${e-r},${t-r}h${n}v${n}h${-n}z`},nt=(e,t,n,r)=>{let i=n/2,a=r/2;return`M${e-i},${t-a}h${n}v${r}h${-n}z`},rt=(e,t,n)=>`M${e},${t}v${n}`,it=(e,t,n)=>`M${e},${t}h${n}`,at=(e,t,n,r)=>`M${e},${t}L${n},${r}`,ot=e=>new s(e,{round:2}).optimize().toString();export{u as ColourMath,f as ColourScaleGenerator,ee as ColourUtility,d as HslColour,I as addSpan,L as beautifySuffix,Ue as between,oe as cCircleWhite,ae as cCombiningDiaeresis,te as cDashEm,y as cDashEn,ne as cDashFigure,b as cMinus,x as cPlus,re as cPlusSmall,S as cSpaceFigure,C as cSpaceNarrowNoBreaking,w as cSpaceNoBreak,T as cSpacePunctuation,E as cSpaceThin,ie as cSpaceZeroWidthBreaking,Le as capitalizeFirstLetter,c as chunkify,l as clamp,fe as closestDateIndex,p as datetimeFormat,we as delay,et as drawSvgCircle,it as drawSvgHLine,at as drawSvgLine,tt as drawSvgRect,nt as drawSvgRectWH,rt as drawSvgVLine,he as formatDate,V as formatFloat,Ee as formatFloatFixed,U as formatFloatWithUnit,k as formatFromToTime,G as formatInt,_e as formatLocalDate,ve as formatLocalTime,Ie as formatPP,J as formatPercent,De as formatReales,H as formatSiFloat,je as formatSiInt,Te as formatSignFloat,Ae as formatSignInt,Fe as formatSignPercent,ge as formatTime,xe as formatTimeRange,R as formatUnit,Oe as formatWeight,z as formatWithIntl,F as getCardinalRules,X as getCurveValue,Ke as getCurveValueClamped,ue as getDateDistance,Se as getDateFromTicks,Ve as getElementDimensions,He as getElementDimensionsPrecise,ze as getElementHeight,Y as getElementRect,Be as getElementWidth,se as getFormattedDate,ce as getFormattedDateShort,le as getFormattedDateShortSeconds,O as getLocalHour,_ as getLocale,Pe as getOrdinal,be as getRange,pe as getRelativeTime,Ce as getTicksFromDate,M as getTimeFromTicks,N as getTimestampFromTicks,ye as isBetweenTime,de as isFutureDate,me as isPastDate,qe as nearestPow2,Je as nextPow2,v as onLocaleChange,ot as optimisePath,Re as pluralise,W as round,ke as roundToThousands,D as setDateLocale,g as setLocale,Qe as simpleNumberSort,$e as simpleStringSort,Ze as sortBy};
//# sourceMappingURL=index.js.map