{"version":3,"file":"index.js","names":["result: T[][]","#colour","#backgroundY","#baseHue","#maxChroma","#maxScaleNumber","#minChroma","#normalizeScaleNumber","#computeScaleLightness","#computeScaleHue","#computeScaleChroma","#baseTint","#onDark","#onLight","#baseColour","localeChangeCallbacks: (() => void)[]","#response"],"sources":["../src/chunkify.ts","../src/common.ts","../src/colour/colour-math.ts","../src/colour/hsl-colour.ts","../src/colour/colour-at-scale.ts","../src/colour/colour-utility.ts","../src/date/constants.ts","../src/locale.ts","../src/unicode.ts","../src/date/date.ts","../src/date/ticks.ts","../src/delay.ts","../src/fetch.ts","../src/format/cardinal.ts","../src/format/helpers.ts","../src/format/intl.ts","../src/format/number.ts","../src/format/ordinal.ts","../src/format/percent.ts","../src/format/text.ts","../src/html.ts","../src/math/common.ts","../src/math/find-segment.ts","../src/math/power.ts","../src/sort.ts","../src/svg/draw.ts","../src/svg/optimise.ts"],"sourcesContent":["/**\n * Splits an array into n pieces.\n *\n * @param array - The source array to be split.\n * @param n - The number of pieces to create (must be >= 1).\n * @param balanced - If true, chunk sizes differ by at most 1 element.\n *                    If false, creates n-1 equal chunks with remainder in the last chunk.\n * @returns An array of n (or fewer) arrays containing the split pieces.\n * @throws {Error} If n is less than 1.\n *\n * @example\n * // Balanced split (default)\n * chunkify([1,2,3,4,5,6,7], 3) // [[1,2,3], [4,5], [6,7]]\n *\n * @example\n * // Unbalanced split\n * chunkify([1,2,3,4,5,6,7], 3, false) // [[1,2], [3,4], [5,6,7]]\n */\nexport const chunkify = <T>(array: T[], n: number, balanced = true): T[][] => {\n    // Input validation\n    if (n < 1) {\n        throw new Error(\"n must be at least 1\")\n    }\n\n    if (!Number.isInteger(n)) {\n        throw new TypeError(\"n must be an integer\")\n    }\n\n    const length = array.length\n\n    // Edge cases\n    if (length === 0) {\n        return []\n    }\n\n    if (n === 1) {\n        return [array]\n    }\n\n    if (n >= length) {\n        return array.map((item) => [item])\n    }\n\n    const result: T[][] = []\n\n    if (balanced) {\n        // Balanced: distribute elements so chunk sizes differ by at most 1\n        // This ensures chunks are as even as possible\n        let index = 0\n        let remainingChunks = n\n\n        while (remainingChunks > 0) {\n            const remainingElements = length - index\n            const chunkSize = Math.ceil(remainingElements / remainingChunks)\n            result.push(array.slice(index, index + chunkSize))\n            index += chunkSize\n            remainingChunks--\n        }\n    } else {\n        // Unbalanced: create n-1 equal-sized chunks, with remainder in the last chunk\n        const baseChunkSize = Math.floor(length / n)\n        let index = 0\n\n        for (let index_ = 0; index_ < n - 1; index_++) {\n            result.push(array.slice(index, index + baseChunkSize))\n            index += baseChunkSize\n        }\n\n        // Last chunk gets all remaining elements\n        result.push(array.slice(index))\n    }\n\n    return result\n}\n","export const clamp = (x: number | string, min: number | string, max: number | string): number => {\n    let lower = Number(min)\n    let upper = Number(max)\n    const value = Number(x)\n\n    if (Number.isNaN(value) || Number.isNaN(lower) || Number.isNaN(upper)) {\n        return Number.NaN\n    }\n\n    if (lower > upper) {\n        ;[lower, upper] = [upper, lower]\n    }\n    return Math.min(Math.max(value, lower), upper)\n}\n\nexport const isEmpty = (object: null | Record<string, unknown> | undefined): boolean =>\n    object !== undefined && object !== null && Object.keys(object).length === 0\n","export class ColourMath {\n    static readonly backgroundLightnessThreshold = 0.18\n    static readonly chromaCurveFactor = 4\n    static readonly cieExponent = 1 / 3\n\n    static readonly cieMultiplierHigh = 116\n    static readonly cieMultiplierLow = 903.296_296_2\n    static readonly cieOffset = 16\n    // CIE lightness conversion thresholds\n    static readonly cieThreshold = 0.008_856_451_6\n    // Scale computation constants\n    static readonly hueShiftFactor = 5\n\n    static readonly lightnessContrastExponent = 3.04\n    static readonly lightnessContrastOffset = 0.05\n    static readonly lightnessMax = 1\n    static readonly lightnessMin = 0\n    // Normalization constants\n    static readonly lightnessScaleFactor = 100\n\n    // Toe function coefficients for perceptual lightness adjustment\n    static readonly toeK1 = 0.206\n    static readonly toeK2 = 0.03\n    static readonly toeK3 = (1 + ColourMath.toeK1) / (1 + ColourMath.toeK2)\n\n    static applyToeCurve(lightness: number): number {\n        const term = ColourMath.toeK3 * lightness - ColourMath.toeK1\n        return 0.5 * (term + Math.sqrt(term * term + 4 * ColourMath.toeK2 * ColourMath.toeK3 * lightness))\n    }\n\n    static yToLightness(y: number): number {\n        return y <= ColourMath.cieThreshold\n            ? y * ColourMath.cieMultiplierLow\n            : ColourMath.cieMultiplierHigh * Math.pow(y, ColourMath.cieExponent) - ColourMath.cieOffset\n    }\n}\n","import Color, { type Coords } from \"colorjs.io\"\n\nimport { clamp } from \"../common.js\"\n\nexport class HslColour {\n    static readonly colorSpace = \"okhsl\"\n    static readonly hexFormat = \"hex\"\n    static readonly hueMax = 360\n    static readonly hueMin = 0\n    static readonly lightnessMax = 100\n    static readonly lightnessMin = 0\n    static readonly outputColorSpace = \"srgb\"\n    static readonly saturationMax = 100\n    static readonly saturationMin = 0\n\n    get colourObject(): Color {\n        return this.#colour\n    }\n\n    get h(): number {\n        return (this.#colour.h as number | undefined) ?? HslColour.hueMin\n    }\n\n    set h(value: number | string) {\n        const h = Number(value)\n        if (Number.isNaN(h)) {\n            console.warn(\n                `${HslColour.name}: Cannot set hue to invalid value \"${value}\" (${h}), ` +\n                    `keeping current value \"${this.#colour.h}\"`,\n            )\n            return\n        }\n        this.#colour.h = ((h % HslColour.hueMax) + HslColour.hueMax) % HslColour.hueMax\n    }\n\n    get hex(): string {\n        return this.#colour.to(HslColour.outputColorSpace).toString({ format: HslColour.hexFormat })\n    }\n\n    get l(): number {\n        return (this.#colour.l as number | undefined) ?? HslColour.lightnessMin\n    }\n\n    set l(value: number | string) {\n        const l = Number(value)\n        if (Number.isNaN(l)) {\n            console.warn(\n                `${HslColour.name}: Cannot set lightness to invalid value \"${value}\" (${l}), ` +\n                    `keeping current value \"${this.#colour.l}\"`,\n            )\n            return\n        }\n        this.#colour.l = clamp(l, HslColour.lightnessMin, HslColour.lightnessMax)\n    }\n\n    get s(): number {\n        return (this.#colour.s as number | undefined) ?? HslColour.saturationMin\n    }\n\n    set s(value: number | string) {\n        const s = Number(value)\n        if (Number.isNaN(s)) {\n            console.warn(\n                `${HslColour.name}: Cannot set saturation to invalid value \"${value}\" (${s}), ` +\n                    `keeping current value \"${this.#colour.s}\"`,\n            )\n            return\n        }\n        this.#colour.s = clamp(s, HslColour.saturationMin, HslColour.saturationMax)\n    }\n\n    readonly #colour: Color\n\n    constructor(argument: Color | Coords | string) {\n        if (typeof argument === \"string\") {\n            this.#colour = new Color(argument).to(HslColour.colorSpace)\n        } else if (argument instanceof Color) {\n            this.#colour = new Color(argument).to(HslColour.colorSpace)\n        } else {\n            this.#colour = new Color({ coords: argument, space: HslColour.colorSpace })\n        }\n    }\n\n    static mix(color1: HslColour, color2: HslColour, weight: number): HslColour {\n        const mix = Color.mix(color1.colourObject, color2.colourObject, weight, {\n            outputSpace: HslColour.colorSpace,\n            space: HslColour.colorSpace,\n        })\n        return new HslColour(mix)\n    }\n\n    clone(): HslColour {\n        return new HslColour(this.#colour)\n    }\n\n    toString(): string {\n        return this.hex\n    }\n}\n","import type { Coords } from \"colorjs.io\"\n\nimport { clamp } from \"../common.js\"\nimport { ColourMath } from \"./colour-math.js\"\nimport { HslColour } from \"./hsl-colour.js\"\n\n/**\n * {@link https://matthewstrom.com/writing/generating-color-palettes/}\n *\n * Utility class for perceptually-designed HSL color scale generation.\n * Based on Matthew Ström's color palette generation algorithm.\n */\n\nexport class ColourScaleGenerator {\n    readonly #backgroundY: number\n    readonly #baseHue: number\n    readonly #maxChroma: number\n    readonly #maxScaleNumber: number\n    readonly #minChroma: number\n\n    constructor(maxScaleNumber: number, baseHue: number, minChroma: number, maxChroma: number, backgroundY: number) {\n        this.#maxScaleNumber = maxScaleNumber\n        this.#baseHue = baseHue\n        this.#minChroma = minChroma\n        this.#maxChroma = maxChroma\n        this.#backgroundY = backgroundY\n    }\n\n    computeColour(scaleNumber: number): HslColour {\n        const scaleValue = this.#normalizeScaleNumber(scaleNumber)\n\n        const rawLightness = this.#computeScaleLightness(scaleValue)\n        const normalizedLightness = clamp(\n            rawLightness / ColourMath.lightnessScaleFactor,\n            ColourMath.lightnessMin,\n            ColourMath.lightnessMax,\n        )\n\n        const hue = this.#computeScaleHue(scaleValue)\n        const chroma = this.#computeScaleChroma(scaleValue)\n\n        const coords: Coords = [hue, chroma, normalizedLightness]\n        return new HslColour(coords)\n    }\n\n    #computeScaleChroma(scaleValue: number): number {\n        const chromaDifference = this.#maxChroma - this.#minChroma\n        const parabolaFactor = -ColourMath.chromaCurveFactor * chromaDifference\n        const linearFactor = ColourMath.chromaCurveFactor * chromaDifference\n\n        return parabolaFactor * Math.pow(scaleValue, 2) + linearFactor * scaleValue + this.#minChroma\n    }\n\n    #computeScaleHue(scaleValue: number): number {\n        return this.#baseHue + ColourMath.hueShiftFactor * (1 - scaleValue)\n    }\n\n    #computeScaleLightness(scaleValue: number): number {\n        const exponentialTerm = Math.exp(ColourMath.lightnessContrastExponent * scaleValue)\n        const adjustedBackground = this.#backgroundY + ColourMath.lightnessContrastOffset\n\n        const foregroundY =\n            this.#backgroundY > ColourMath.backgroundLightnessThreshold\n                ? adjustedBackground / exponentialTerm - ColourMath.lightnessContrastOffset\n                : exponentialTerm * adjustedBackground - ColourMath.lightnessContrastOffset\n\n        return ColourMath.applyToeCurve(ColourMath.yToLightness(foregroundY))\n    }\n\n    #normalizeScaleNumber(scaleNumber: number): number {\n        return scaleNumber / this.#maxScaleNumber\n    }\n}\n","import { ColourScaleGenerator } from \"./colour-at-scale.js\"\nimport { HslColour } from \"./hsl-colour.js\"\n\nexport class ColourUtility {\n    static readonly defaultBaseTint = 40\n    static readonly defaultHarmonizationMix = 80\n    static readonly fallbackHue = 0\n    static readonly fallbackLightness = 0\n    static readonly fallbackSaturation = 1\n    static readonly maxSaturation = 0.25\n    static readonly maxSaturationNeutral = 0.2\n    static readonly maxTone = 100\n    static readonly minSaturation = 0\n    static readonly neutralHarmonizationMix = 0\n    static readonly onDarkBase = \"#fff\"\n    static readonly onDarkMixAmount = 5\n    static readonly onLightBase = \"#000\"\n    static readonly onLightMixAmount = 40\n    static readonly percentageScale = 100\n\n    get baseTint() {\n        return this.#baseTint\n    }\n    get onDark() {\n        return this.#onDark\n    }\n    get onLight() {\n        return this.#onLight\n    }\n    readonly #baseColour: HslColour\n\n    readonly #baseTint: number\n\n    readonly #onDark: HslColour\n\n    readonly #onLight: HslColour\n\n    constructor(baseColourHex: string, baseTint = ColourUtility.defaultBaseTint) {\n        this.#baseColour = new HslColour(baseColourHex)\n        this.#baseTint = baseTint\n        this.#onDark = this.colourMixin(new HslColour(ColourUtility.onDarkBase), ColourUtility.onDarkMixAmount)\n        this.#onLight = this.colourMixin(new HslColour(ColourUtility.onLightBase), ColourUtility.onLightMixAmount)\n    }\n\n    colourMixin(mixColour: HslColour | string, mixAmount = ColourUtility.defaultHarmonizationMix) {\n        const targetColour = typeof mixColour === \"string\" ? new HslColour(mixColour) : mixColour\n        const harmonizedBase = new HslColour([targetColour.h, this.#baseColour.s, this.#baseColour.l])\n        return this.mixColours(harmonizedBase, targetColour, ColourUtility.percentageScale - mixAmount)\n    }\n\n    getBaseTintedColour(colourHex: string) {\n        return this.getTint(new HslColour(colourHex), this.#baseTint)\n    }\n\n    getColourAtTint(tone: number, colour: HslColour, background: HslColour, neutral = false) {\n        const invertedTone = ColourUtility.maxTone - tone\n        const hue = colour.h\n        const saturation = colour.s\n        const maxSaturation = neutral\n            ? ColourUtility.maxSaturationNeutral\n            : Math.max(ColourUtility.maxSaturation, saturation)\n        const backgroundLightness = background.l\n        const invertedBackgroundLightness = 1 - backgroundLightness\n\n        const generator = new ColourScaleGenerator(\n            ColourUtility.maxTone,\n            hue,\n            ColourUtility.minSaturation,\n            maxSaturation,\n            invertedBackgroundLightness,\n        )\n        return generator.computeColour(invertedTone)\n    }\n\n    getHarmonisedColour(colourHex: string, mixAmount?: number) {\n        const harmonized = this.colourMixin(new HslColour(colourHex), mixAmount)\n        return this.getTint(harmonized, this.#baseTint)\n    }\n\n    getHarmonisedColourNeutral(colourHex: string) {\n        const harmonized = this.colourMixin(new HslColour(colourHex), ColourUtility.neutralHarmonizationMix)\n        return this.getTint(harmonized, this.#baseTint, this.#onLight, true)\n    }\n\n    getTint(colour: HslColour, tone: number, backgroundColour = this.#onLight, neutral = false) {\n        return this.getColourAtTint(tone, colour, backgroundColour, neutral)\n    }\n\n    mixColours(color1: HslColour, color2: HslColour, weightPercentage = this.#baseTint) {\n        const weightScale = weightPercentage / ColourUtility.percentageScale\n        return HslColour.mix(color1, color2, weightScale)\n    }\n}\n","/**\n * Standard datetime format used throughout the application.\n */\nexport const datetimeFormat = \"YYYY-MM-DD HH:mm\"\n","let currentLocale = \"en-GB\"\nconst localeChangeCallbacks: (() => void)[] = []\n\nexport const setLocale = (locale: string): void => {\n    if (currentLocale !== locale) {\n        currentLocale = locale\n        // Notify all registered callbacks\n        for (const callback of localeChangeCallbacks) callback()\n    }\n}\n\nexport const getLocale = (): string => currentLocale\n\n/**\n * Register a callback to be called whenever the locale changes.\n * @param callback - Function to call on locale change\n */\nexport const onLocaleChange = (callback: () => void): void => {\n    localeChangeCallbacks.push(callback)\n}\n","export const cCircleWhite = String.fromCodePoint(0x25_cb)\nexport const cCombiningDiaeresis = String.fromCodePoint(0x03_08)\nexport const cDashEm = String.fromCodePoint(0x20_14)\nexport const cDashEn = String.fromCodePoint(0x20_13)\nexport const cDashFigure = String.fromCodePoint(0x20_12)\nexport const cMinus = String.fromCodePoint(0x22_12)\nexport const cPlus = String.fromCodePoint(0x00_2b)\nexport const cPlusSmall = String.fromCodePoint(0xfe_62)\nexport const cSmallDot = String.fromCodePoint(0x00_b7)\nexport const cSpace = String.fromCodePoint(0x00_20)\nexport const cSpaceFigure = String.fromCodePoint(0x20_07)\nexport const cSpaceNarrowNoBreaking = String.fromCodePoint(0x20_2f)\nexport const cSpaceNoBreak = String.fromCodePoint(0x00_a0)\nexport const cSpacePunctuation = String.fromCodePoint(0x20_08)\nexport const cSpaceThin = String.fromCodePoint(0x20_09)\nexport const cSpaceZeroWidthBreaking = String.fromCodePoint(0xfe_ff)\nexport const cSpaceZeroWidthNoBreak = String.fromCodePoint(0xfe_ff)\n","import type { Dayjs } from \"dayjs\"\n\nimport \"dayjs/locale/de\"\nimport \"dayjs/locale/en\"\nimport dayjs from \"dayjs\"\nimport customParseFormat from \"dayjs/plugin/customParseFormat\"\nimport \"dayjs/locale/en-gb\"\nimport isBetween from \"dayjs/plugin/isBetween\"\nimport isSameOrBefore from \"dayjs/plugin/isSameOrBefore\"\nimport relativeTime from \"dayjs/plugin/relativeTime\"\nimport utc from \"dayjs/plugin/utc\"\n\nimport { getLocale, onLocaleChange, setLocale as setLibraryLocale } from \"../locale.js\"\nimport { cDashEn, cSpaceNoBreak } from \"../unicode.js\"\nimport { datetimeFormat } from \"./constants.js\"\n\ndayjs.extend(relativeTime)\ndayjs.extend(customParseFormat)\ndayjs.extend(isBetween)\ndayjs.extend(isSameOrBefore)\ndayjs.extend(relativeTime)\ndayjs.extend(utc)\n\n// Wrapper to sync dayjs locale with library locale\nexport const setDateLocale = (locale: string): void => {\n    setLibraryLocale(locale)\n    dayjs.locale(locale)\n}\n\n// Sync dayjs locale on any locale changes\nonLocaleChange(() => {\n    dayjs.locale(getLocale())\n})\n\n// Initialise with default\nsetDateLocale(\"en-GB\")\n\n/**\n * Formats date with locale-specific formatting.\n * @param date - Date string to format\n * @param locale - Optional locale override\n * @example getFormattedDate('2024-01-15') → \"Montag, 15. Januar, 14.30\" (de)\n * @example getFormattedDate('2024-01-15', 'en') → \"Monday, 15. January, 14.30\"\n */\nexport const getFormattedDate = (date: string, locale?: string): string => {\n    const effectiveLocale = locale ?? getLocale()\n    return dayjs(date).locale(effectiveLocale).format(\"dddd, D. MMMM, H.mm\")\n}\n\n/**\n * Short date format with day, month, and time.\n * @example getFormattedDateShort('2024-01-15') → \"15.1. 14.30\"\n */\nexport const getFormattedDateShort = (date: number | string, locale?: string): string => {\n    const effectiveLocale = locale ?? getLocale()\n    return dayjs(date).locale(effectiveLocale).format(\"D.M. H.mm\")\n}\n\n/**\n * Date format with seconds included.\n * @example getFormattedDateShortSeconds('2024-01-15') → \"15. Januar 14.30.45\"\n */\nexport const getFormattedDateShortSeconds = (date: number | string, locale?: string): string => {\n    const effectiveLocale = locale ?? getLocale()\n    return dayjs(date).locale(effectiveLocale).format(\"D. MMMM H.mm.ss\")\n}\n\n/**\n * Returns relative time string (e.g., \"vor 2 Stunden\" or \"2 hours ago\").\n * Uses currently active locale.\n */\nexport const getDateDistance = (date: string, locale?: string): string => {\n    const effectiveLocale = locale ?? getLocale()\n    return dayjs(date).locale(effectiveLocale).fromNow()\n}\n\n/**\n * Checks if the given date is in the future.\n */\nexport const isFutureDate = (date: Date | string): boolean => {\n    return dayjs().isBefore(date)\n}\n\n/**\n * Finds the index of the date closest to now.\n * @returns Index of closest date, or undefined if array is empty\n */\nexport const closestDateIndex = (datesString: string[]): number | undefined => {\n    if (datesString.length === 0) return undefined\n\n    const now = dayjs()\n    const dateDiffs = datesString.map((date) => Math.abs(now.diff(date)))\n    return dateDiffs.indexOf(Math.min(...dateDiffs))\n}\n\n// ============================================================================\n// Time Formatting\n// ============================================================================\n\n/**\n * Formats a datetime string as relative time (e.g., \"2 hours ago\").\n *\n * @param time - Datetime string in YYYY-MM-DD HH:mm format.\n * @returns Relative time string.\n *\n * @example\n * getRelativeTime(\"2024-01-15 10:00\") // \"2 hours ago\"\n */\nexport const getRelativeTime = (time: string): string => {\n    return dayjs.utc(time, datetimeFormat).fromNow()\n}\n\n/**\n * Checks if a datetime is in the past (or current moment).\n *\n * @param time - Datetime string in YYYY-MM-DD HH:mm format.\n * @returns True if the time is same or before now.\n *\n * @example\n * isPastDate(\"2024-01-15 10:00\") // true if current time is after this\n */\nexport const isPastDate = (time: string): boolean => {\n    return dayjs.utc(time, datetimeFormat).isSameOrBefore(dayjs.utc())\n}\n\n/**\n * Formats a datetime string in UTC.\n *\n * @param time - Datetime string in YYYY-MM-DD HH:mm format.\n * @returns Formatted UTC datetime string.\n *\n * @example\n * formatDate(\"2024-01-15 10:00\") // \"2024-01-15 10:00\"\n */\nexport const formatDate = (time: string): string => {\n    return dayjs.utc(time, datetimeFormat).format(datetimeFormat)\n}\n\n/**\n * Formats a datetime string as time only in UTC.\n *\n * @param time - Datetime string in YYYY-MM-DD HH:mm format.\n * @returns Formatted UTC time string (H:mm).\n *\n * @example\n * formatTime(\"2024-01-15 10:30\") // \"10:30\"\n */\nexport const formatTime = (time: string): string => {\n    return dayjs.utc(time, datetimeFormat).format(\"H:mm\")\n}\n\n/**\n * Formats a datetime string in local timezone.\n *\n * @param time - Datetime string in YYYY-MM-DD HH:mm format.\n * @returns Formatted local datetime string.\n *\n * @example\n * formatLocalDate(\"2024-01-15 10:00\") // \"2024-01-15 14:00\" (if local is UTC+4)\n */\nexport const formatLocalDate = (time: string): string => {\n    return dayjs.utc(time, datetimeFormat).local().format(datetimeFormat)\n}\n\n/**\n * Formats a datetime string as time only in local timezone.\n *\n * @param time - Datetime string in YYYY-MM-DD HH:mm format.\n * @returns Formatted local time string (H:mm).\n *\n * @example\n * formatLocalTime(\"2024-01-15 10:00\") // \"14:00\" (if local is UTC+4)\n */\nexport const formatLocalTime = (time: string): string => {\n    return dayjs.utc(time, datetimeFormat).local().format(\"H:mm\")\n}\n\n/**\n * Checks if a time falls within a given range.\n *\n * @param time - Datetime string in YYYY-MM-DD HH:mm format (or undefined).\n * @param begin - Start of the time range.\n * @param end - End of the time range.\n * @returns True if time is within range (exclusive start, inclusive end).\n *\n * @example\n * const begin = dayjs(\"2024-01-15 10:00\")\n * const end = dayjs(\"2024-01-15 20:00\")\n * isBetweenTime(\"2024-01-15 15:00\", begin, end) // true\n */\nexport const isBetweenTime = (time: string | undefined, begin: Dayjs, end: Dayjs): boolean => {\n    if (!time) return false\n    return dayjs(time, datetimeFormat).isBetween(begin, end, \"hour\", \"(]\")\n}\n\n/**\n * Converts a date range array to begin/end Dayjs objects.\n *\n * @param dateRange - Array of Date objects.\n * @returns Object with begin and end Dayjs objects.\n *\n * @example\n * const dates = [new Date(\"2024-01-01\"), new Date(\"2024-01-31\")]\n * const { begin, end } = getRange(dates)\n */\nexport const getRange = (dateRange: Date[]): { begin: Dayjs; end: Dayjs } => {\n    const begin = dayjs(dateRange[0])\n    const end = dayjs(dateRange.at(-1))\n    return { begin, end }\n}\n\n/**\n * Converts a UTC hour to local hour.\n *\n * @param hour - Hour in UTC (0-23).\n * @returns Hour in local timezone (0-23).\n */\nexport const getLocalHour = (hour: number): number => {\n    return Number(dayjs.utc().hour(hour).local().format(\"H\"))\n}\n\n/**\n * Formats a time range as HTML with non-breaking spaces.\n *\n * @param from - Starting hour.\n * @param to - Ending hour.\n * @returns HTML string with formatted time range.\n */\nexport const formatFromToTime = (from: number, to: number): string => {\n    return `<span class=\"text-no-wrap\">${from}${cSpaceNoBreak}${cDashEn}${cSpaceNoBreak}${to}</span>`\n}\n\n/**\n * Formats a time range showing both UTC and local times.\n *\n * @param from - Starting hour in UTC.\n * @param to - Ending hour in UTC.\n * @returns HTML string with UTC and local time ranges.\n */\nexport const formatTimeRange = (from: number, to: number): string => {\n    const fromLocal = getLocalHour(from)\n    const toLocal = getLocalHour(to)\n    return `${formatFromToTime(from, to)} (${formatFromToTime(fromLocal, toLocal)}${cSpaceNoBreak}local)`\n}\n","import dayjs from \"dayjs\"\nimport utc from \"dayjs/plugin/utc\"\n\ndayjs.extend(utc)\n\n/**\n * The .NET DateTime epoch in ticks (January 1, 0001 00:00:00 UTC).\n * .NET ticks are 100-nanosecond intervals since this epoch.\n * This value represents the number of ticks between .NET epoch and Unix epoch.\n *\n * Calculation:\n * - Unix epoch: January 1, 1970 00:00:00 UTC\n * - .NET epoch: January 1, 0001 00:00:00 UTC\n * - Time difference: 1969 years, 365.2425 days/year average (accounting for leap years)\n * - Days between epochs: 719,162 days\n * - In 100-nanosecond ticks: 719,162 days × 24 hours × 60 min × 60 sec × 10,000,000 ticks/sec\n * - Result: 621,355,968,000,000,000 ticks\n */\nconst dotNetEpochTicks = 621_355_968_000_000_000n\n\n/**\n * Number of ticks per millisecond in .NET DateTime.\n *\n * Calculation:\n * - 1 tick = 100 nanoseconds (defined by .NET)\n * - 1 millisecond = 1,000,000 nanoseconds\n * - Therefore: 1,000,000 ÷ 100 = 10,000 ticks per millisecond\n */\nconst ticksPerMillisecond = 10_000n\n\n/**\n * Converts .NET DateTime ticks to a formatted date-time string.\n *\n * @param ticks - The time in .NET ticks (100-nanosecond intervals since 0001-01-01).\n * @returns Formatted date-time string in UTC (YYYY-MM-DD HH:mm).\n *\n * @example\n * // Convert .NET DateTime.Now.Ticks to readable format\n * getTimeFromTicks(638400000000000000) // \"2024-01-15 10:30\"\n */\nexport const getTimeFromTicks = (ticks: bigint | number | string): string => {\n    const milliseconds = getTimestampFromTicks(ticks)\n    return dayjs.utc(milliseconds).format(\"YYYY-MM-DD HH:mm\")\n}\n\n/**\n * Converts .NET DateTime ticks to a Day.js object.\n *\n * @param ticks - The time in .NET ticks (100-nanosecond intervals since 0001-01-01).\n * @returns A Day.js object in UTC.\n *\n * @example\n * const date = getDateFromTicks(638400000000000000)\n * console.log(date.format(\"YYYY-MM-DD\"))\n */\nexport const getDateFromTicks = (ticks: bigint | number): dayjs.Dayjs => {\n    const ticksBI = BigInt(ticks)\n\n    const millisecondsBI = (ticksBI - dotNetEpochTicks) / ticksPerMillisecond\n\n    return dayjs.utc(Number(millisecondsBI))\n}\n\n/**\n * Converts a Day.js object or timestamp to .NET DateTime ticks.\n *\n * @param date - A Day.js object or Unix timestamp in milliseconds.\n * @returns The time in .NET ticks.\n *\n * @example\n * const ticks = getTicksFromDate(dayjs())\n * const ticks2 = getTicksFromDate(Date.now())\n */\nexport const getTicksFromDate = (date: dayjs.Dayjs | number): bigint => {\n    const millisecondsBI = BigInt(typeof date === \"number\" ? date : date.valueOf())\n\n    return millisecondsBI * ticksPerMillisecond + dotNetEpochTicks\n}\n\n/**\n * Converts .NET DateTime ticks to a Unix timestamp in milliseconds.\n *\n * @param ticks - The time in .NET ticks (100-nanosecond intervals since 0001-01-01).\n * @returns Unix timestamp in milliseconds.\n *\n * @example\n * const timestamp = getTimestampFromTicks(638400000000000000)\n * const date = new Date(timestamp)\n */\nexport const getTimestampFromTicks = (ticks: bigint | number | string): number => {\n    const ticksBI = BigInt(ticks)\n    const millisecondsBI = (ticksBI - dotNetEpochTicks) / ticksPerMillisecond\n    return Number(millisecondsBI)\n}\n","export const delay = async (ms: number): Promise<unknown> => await new Promise((resolve) => setTimeout(resolve, ms))\n","class FetchError extends Error {\n    get response(): Response {\n        return this.#response\n    }\n\n    get status(): number {\n        return this.#response.status\n    }\n\n    get statusText(): string {\n        return this.#response.statusText\n    }\n\n    get url(): string {\n        return this.#response.url\n    }\n\n    readonly #response: Response\n\n    constructor(response: Response) {\n        super(`${response.url} ${response.statusText} (status ${response.status})`)\n        this.name = \"FetchError\"\n        this.#response = response\n    }\n}\n\nexport const loadFile = async <T = unknown>(path: string): Promise<T> => {\n    const response = await fetch(path)\n\n    if (!response.ok) {\n        throw new FetchError(response)\n    }\n\n    return (await response.json()) as Promise<T>\n}\n","const cardinalRulesCache = new Map<string, Intl.PluralRules>()\n\nexport const getCardinalRules = (locale: string): Intl.PluralRules => {\n    let rules = cardinalRulesCache.get(locale)\n    if (!rules) {\n        rules = new Intl.PluralRules(locale, { type: \"cardinal\" })\n        cardinalRulesCache.set(locale, rules)\n    }\n    return rules\n}\n","import { cSpaceThin } from \"../unicode.js\"\n\n/**\n * Adds styled span/tspan wrapper for compact notation suffixes.\n */\nexport const addSpan = (suffix: string, svg: boolean): string =>\n    svg ? `<tspan class=\"caps\">${suffix}</tspan>` : `<span class=\"caps\">${suffix}</span>`\n\n/**\n * Beautifies compact notation suffixes (K, M) with styling and spacing.\n */\nexport const beautifySuffix = (suffix: string, svg: boolean): string =>\n    cSpaceThin + suffix.replace(\"K\", addSpan(\"k\", svg)).replace(\"M\", addSpan(\"m\", svg))\n\nexport const formatUnit = (u: string, svg = false): string => {\n    if (u === u.toLowerCase()) {\n        return u\n    }\n\n    const tag = svg ? \"tspan\" : \"span\"\n\n    if (u.length > 1) {\n        return `<${tag} class=\"caps\">${u}</${tag}>`\n    }\n\n    return `<${tag} style=\"font-variant-caps: all-small-caps\">${u}</${tag}>`\n}\n","import { getLocale } from \"../locale.js\"\nimport { cMinus, cPlus, cSpaceNarrowNoBreaking, cSpaceThin } from \"../unicode.js\"\nimport { beautifySuffix } from \"./helpers.js\"\n\n/**\n * Internal number formatter using Intl.NumberFormat with custom typographic enhancements.\n * Applies thin spaces, proper minus signs, and styled compact notation.\n */\nexport const formatWithIntl = (value: number, options: Intl.NumberFormatOptions, svg = false): string =>\n    new Intl.NumberFormat(getLocale(), options)\n        .formatToParts(value)\n        .map((part) => {\n            switch (part.type) {\n                case \"compact\": {\n                    return beautifySuffix(part.value, svg)\n                }\n\n                case \"currency\": {\n                    return part.value\n                }\n\n                case \"decimal\": {\n                    return part.value\n                }\n\n                case \"fraction\": {\n                    return part.value\n                }\n\n                case \"group\": {\n                    return cSpaceThin\n                }\n\n                case \"integer\": {\n                    return part.value\n                }\n\n                case \"literal\": {\n                    return part.value\n                }\n\n                case \"minusSign\": {\n                    return `${cMinus}${cSpaceNarrowNoBreaking}`\n                }\n\n                case \"percentSign\": {\n                    return `${cSpaceNarrowNoBreaking}%`\n                }\n\n                case \"plusSign\": {\n                    return `${cPlus}${cSpaceNarrowNoBreaking}`\n                }\n\n                case \"unit\": {\n                    return part.value\n                }\n            }\n            return part.value\n        })\n        .join(\"\")\n","import { cSpaceFigure, cSpaceNarrowNoBreaking, cSpacePunctuation } from \"../unicode.js\"\nimport { formatUnit } from \"./helpers.js\"\nimport { formatWithIntl } from \"./intl.js\"\n\n/**\n * Base number formatter with decimal precision.\n */\nconst formatNumber = (value: number, decimals = 2, options: Intl.NumberFormatOptions = {}, svg = false): string => {\n    return formatWithIntl(value, { maximumFractionDigits: decimals, ...options, style: \"decimal\" }, svg)\n}\n\n/**\n * Formats a floating-point number with specified decimal places.\n * @example formatFloat(1234.5678, 2) → \"1 234.57\"\n */\nexport const formatFloat = (value: number, decimals = 2, options: Intl.NumberFormatOptions = {}, svg = false): string =>\n    formatNumber(value, decimals, options, svg)\n\n/**\n * Formats a float with explicit sign (+/-).\n * @example formatSignFloat(42.5, 2) → \"+42.50\"\n * @example formatSignFloat(-42.5, 2) → \"−42.50\"\n */\nexport const formatSignFloat = (value: number, decimals = 2): string => {\n    return formatFloat(value, decimals, { signDisplay: \"always\" })\n}\n\n/**\n * Formats a number with SI compact notation (K, M suffixes).\n * @example formatSiFloat(1234567) → \"1.2 m\" (where m is styled)\n */\nexport const formatSiFloat = (value: number, svg = false): string => {\n    return formatFloat(\n        value,\n        2,\n        {\n            maximumSignificantDigits: 2,\n            notation: \"compact\",\n        },\n        svg,\n    )\n}\n\n/**\n * Formats a float with fixed decimal places, using figure spaces for missing digits.\n * Ensures alignment in tabular data by replacing trailing zeros with figure spaces.\n * @example formatFloatFixed(42, 2) → \"42  \" (with figure spaces)\n * @example formatFloatFixed(42.1, 2) → \"42.1 \" (with one figure space)\n */\nexport const formatFloatFixed = (value: number, decimals = 2): string => {\n    return formatFloat(value, decimals, { minimumFractionDigits: decimals })\n        .replace(/\\.00$/, cSpacePunctuation + cSpaceFigure + cSpaceFigure)\n        .replace(/\\.0$/, cSpacePunctuation + cSpaceFigure)\n        .replaceAll(/\\.(\\d)0$/g, `.$1${cSpaceFigure}`)\n}\n\nexport const formatFloatWithUnit = (x: number, u: string): string =>\n    `${formatSiFloat(x)}${cSpaceNarrowNoBreaking}${formatUnit(u)}`\n\nexport const formatReales = (x: number): string => `${formatUnit(\"R\")}${cSpaceNarrowNoBreaking}${formatSiFloat(x)}`\n\nexport const formatWeight = (x: number): string => formatFloatWithUnit(x, \"t\")\n\n/**\n * Rounds a number to specified decimal places.\n * @example round(3.14159, 2) → 3.14\n */\nexport const round = (value: number, decimals = 0): number => {\n    return Number(formatFloat(value, decimals))\n}\n\n/**\n * Rounds a number to 3 decimal places (thousands precision).\n * @example roundToThousands(3.14159) → 3.142\n */\nexport const roundToThousands = (value: number): number => round(value, 3)\n\n/**\n * Formats an integer (no decimal places).\n * @example formatInt(1234567) → \"1 234 567\"\n */\nexport const formatInt = (value: number, options: Intl.NumberFormatOptions = {}): string => {\n    return formatNumber(value, 0, options)\n}\n\n/**\n * Formats an integer with explicit sign (+/-).\n * @example formatSignInt(42) → \"+42\"\n */\nexport const formatSignInt = (value: number): string => {\n    return formatInt(value, { signDisplay: \"always\" })\n}\n\n/**\n * Format integer\n */\nexport const formatSiInt = (x: number, max = 2, options = {} as Intl.NumberFormatOptions): string =>\n    formatNumber(x, 0, { ...options, maximumSignificantDigits: max })\n","import { getLocale } from \"../locale.js\"\n\nconst ordinalRulesCache = new Map<string, Intl.PluralRules>()\n\nconst getOrdinalRules = (locale: string): Intl.PluralRules => {\n    let rules = ordinalRulesCache.get(locale)\n    if (!rules) {\n        rules = new Intl.PluralRules(locale, { type: \"ordinal\" })\n        ordinalRulesCache.set(locale, rules)\n    }\n    return rules\n}\n\nconst suffixes = new Map([\n    [\"few\", \"rd\"],\n    [\"one\", \"st\"],\n    [\"other\", \"th\"],\n    [\"two\", \"nd\"],\n])\n\nconst suffixesSuper = new Map([\n    [\"few\", \"ʳᵈ\"],\n    [\"one\", \"ˢᵗ\"],\n    [\"other\", \"ᵗʰ\"],\n    [\"two\", \"ⁿᵈ\"],\n])\n\n/**\n * Format ordinal number with appropriate suffix.\n * @param n - Integer\n * @param sup - True if superscript suffixes needed\n * @param locale - Optional locale override\n * @example getOrdinal(1) → \"1ˢᵗ\"\n * @example getOrdinal(2, false) → \"2nd\"\n * @example getOrdinal(3) → \"3ʳᵈ\"\n */\nexport const getOrdinal = (n: number, sup = true, locale?: string): string => {\n    const effectiveLocale = locale ?? getLocale()\n    const ordinalRules = getOrdinalRules(effectiveLocale)\n    const rule = ordinalRules.select(n)\n    const suffix = sup ? suffixesSuper.get(rule) : suffixes.get(rule)\n    return `${n}${suffix ?? \"\"}`\n}\n","import { formatWithIntl } from \"./intl.js\"\n\n/**\n * Formats a decimal value as a percentage.\n * @param value - Decimal value (e.g., 0.42 for 42%)\n * @param decimals - Number of decimal places\n * @example formatPercent(0.4567, 1) → \"45.7 %\"\n */\nexport const formatPercent = (value: number, decimals = 1, options: Intl.NumberFormatOptions = {}): string => {\n    return formatWithIntl(value, {\n        maximumFractionDigits: decimals,\n        ...options,\n        style: \"percent\",\n    })\n}\n\n/**\n * Formats a percentage with explicit sign (+/-).\n * @example formatSignPercent(0.42, 1) → \"+42.0 %\"\n */\nexport const formatSignPercent = (value: number, decimals = 1): string => {\n    return formatPercent(value, decimals, { signDisplay: \"always\" })\n}\n\n/**\n * Format percentage point\n */\nexport const formatPP = (x: number, f = 0): string => formatPercent(x, f).replace(\"%\", \"pp\")\n","import { getLocale } from \"../locale.js\"\nimport { getCardinalRules } from \"./cardinal.js\"\n\n/**\n * Capitalizes the first letter of a string using locale-aware rules.\n * @example capitalizeFirstLetter(\"hello\") → \"Hello\"\n * @example capitalizeFirstLetter(\"istanbul\") → \"İstanbul\" (in Turkish locale)\n */\nexport const capitalizeFirstLetter = (text: string, locale?: string): string => {\n    if (!text) return text\n    const effectiveLocale = locale ?? getLocale()\n    return text.charAt(0).toLocaleUpperCase(effectiveLocale) + text.slice(1)\n}\n\n/**\n * Returns the appropriate singular or plural form based on count.\n * Uses Intl.PluralRules for locale-aware pluralisation.\n * @example pluralise(1, \"item\", \"items\") → \"item\"\n * @example pluralise(5, \"item\", \"items\") → \"items\"\n */\nexport const pluralise = (count: number, wordSingle: string, wordPlural?: string): string => {\n    const cardinalRules = getCardinalRules(getLocale())\n    const rule = cardinalRules.select(count)\n    return rule === \"one\" ? wordSingle : (wordPlural ?? `${wordSingle}s`)\n}\n","/**\n * Gets the bounding rectangle with all dimensions floored.\n * This is the base function that other utilities build upon.\n *\n * @param element - The HTML or SVG element to measure.\n * @returns A DOMRect-like object with all values floored to integers.\n *\n * @example\n * const rect = getElementRect(document.getElementById('myDiv'))\n * console.log(rect.top, rect.left, rect.width, rect.height)\n */\nexport const getElementRect = (\n    element: HTMLElement | SVGElement,\n): {\n    bottom: number\n    height: number\n    left: number\n    right: number\n    top: number\n    width: number\n    x: number\n    y: number\n} => {\n    const rect = element.getBoundingClientRect()\n    return {\n        bottom: Math.floor(rect.bottom),\n        height: Math.floor(rect.height),\n        left: Math.floor(rect.left),\n        right: Math.floor(rect.right),\n        top: Math.floor(rect.top),\n        width: Math.floor(rect.width),\n        x: Math.floor(rect.x),\n        y: Math.floor(rect.y),\n    }\n}\n\n/**\n * Gets the height of an element in pixels (floored to nearest integer).\n *\n * @param element - The HTML or SVG element to measure.\n * @returns The floored height in pixels, including padding and borders.\n *\n * @example\n * const height = getElementHeight(document.getElementById('myDiv'))\n */\nexport const getElementHeight = (element: HTMLElement | SVGElement): number => {\n    return getElementRect(element).height\n}\n\n/**\n * Gets the width of an element in pixels (floored to nearest integer).\n *\n * @param element - The HTML or SVG element to measure.\n * @returns The floored width in pixels, including padding and borders.\n *\n * @example\n * const width = getElementWidth(document.getElementById('myDiv'))\n */\nexport const getElementWidth = (element: HTMLElement | SVGElement): number => {\n    return getElementRect(element).width\n}\n\n/**\n * Gets both width and height of an element in pixels (floored to nearest integers).\n *\n * @param element - The HTML or SVG element to measure.\n * @returns An object containing floored width and height in pixels.\n *\n * @example\n * const { width, height } = getElementDimensions(document.getElementById('myDiv'))\n */\nexport const getElementDimensions = (element: HTMLElement | SVGElement): { height: number; width: number } => {\n    const { height, width } = getElementRect(element)\n    return { height, width }\n}\n\n/**\n * Gets precise (non-floored) dimensions of an element.\n *\n * @param element - The HTML or SVG element to measure.\n * @returns An object containing precise width and height in pixels.\n *\n * @example\n * const { width, height } = getElementDimensionsPrecise(document.getElementById('myDiv'))\n * // Returns fractional pixels: { width: 150.5, height: 200.75 }\n */\nexport const getElementDimensionsPrecise = (element: HTMLElement | SVGElement): { height: number; width: number } => {\n    const { height, width } = element.getBoundingClientRect()\n    return { height, width }\n}\n","/**\n * Tests if a number is between two bounds (order-independent).\n *\n * @param value - The number to test.\n * @param a - First bound (can be min or max).\n * @param b - Second bound (can be min or max).\n * @param inclusive - If true, bounds are included in the range. Default is true.\n * @returns True if value is within the range defined by a and b.\n *\n * @example\n * between(5, 1, 10) // true\n * between(5, 10, 1) // true (order-independent)\n * between(1, 1, 10) // true (inclusive by default)\n * between(1, 1, 10, false) // false (exclusive)\n */\nexport const between = (value: number, a: number, b: number, inclusive = true): boolean => {\n    const min = Math.min(a, b)\n    const max = Math.max(a, b)\n    return inclusive ? value >= min && value <= max : value > min && value < max\n}\n","/**\n * Represents a point on a cubic Hermite spline curve.\n */\nexport interface CurvePoint {\n    /** Incoming tangent (derivative at this point from the left) */\n    tangentIn: number\n    /** Outgoing tangent (derivative at this point to the right) */\n    tangentOut: number\n    /** Time coordinate (x-axis) */\n    time: number\n    /** Value coordinate (y-axis) */\n    value: number\n}\n\n/**\n * Finds the curve segment containing the given time value.\n *\n * @param time - The time value to search for.\n * @param points - Array of curve points (must be sorted by time in ascending order).\n * @returns A tuple of [startPoint, endPoint] if found, undefined if time is out of bounds.\n */\nconst findSegment = (time: number, points: CurvePoint[]): [CurvePoint, CurvePoint] | undefined => {\n    // Early exit for edge cases\n    if (points.length < 2) {\n        return undefined\n    }\n\n    // Binary search would be more efficient for large arrays, but linear search\n    // is simpler and fine for small-to-medium sized curves\n    for (let index = 0; index < points.length - 1; index++) {\n        const p0 = points[index]\n        const p1 = points[index + 1]\n\n        if (p0 && p1 && time >= p0.time && time <= p1.time) {\n            return [p0, p1]\n        }\n    }\n\n    return undefined\n}\n\n/**\n * Performs cubic Hermite spline interpolation between two curve points.\n *\n * Uses the Hermite basis functions:\n * - h00(t) = 2t³ - 3t² + 1\n * - h10(t) = t³ - 2t² + t\n * - h01(t) = -2t³ + 3t²\n * - h11(t) = t³ - t²\n *\n * @param p0 - Starting point of the segment.\n * @param p1 - Ending point of the segment.\n * @param t - Normalized parameter in range [0, 1].\n * @returns The interpolated value.\n */\nconst hermiteInterpolation = (p0: CurvePoint, p1: CurvePoint, t: number): number => {\n    const t2 = t * t\n    const t3 = t2 * t\n\n    // Hermite basis functions\n    const h00 = 2 * t3 - 3 * t2 + 1 // Start value weight\n    const h10 = t3 - 2 * t2 + t // Start tangent weight\n    const h01 = -2 * t3 + 3 * t2 // End value weight\n    const h11 = t3 - t2 // End tangent weight\n\n    return h00 * p0.value + h10 * p0.tangentOut + h01 * p1.value + h11 * p1.tangentIn\n}\n\n/**\n * Evaluates a cubic Hermite spline curve at a given time.\n *\n * @param time - The time value to evaluate at.\n * @param points - Array of curve points sorted by time in ascending order.\n * @returns The interpolated curve value, or undefined if time is out of bounds.\n * @throws {Error} If points array is empty or not sorted.\n *\n * @example\n * const points: CurvePoint[] = [\n *   { time: 0, value: 0, tangentIn: 0, tangentOut: 1 },\n *   { time: 1, value: 1, tangentIn: 1, tangentOut: 0 }\n * ]\n * getCurveValue(0.5, points) // Returns interpolated value at t=0.5\n */\nexport const getCurveValue = (time: number, points: CurvePoint[]): number | undefined => {\n    // Validation\n    if (points.length === 0) {\n        throw new Error(\"Points array cannot be empty\")\n    }\n\n    const firstPoint = points[0]\n    if (!firstPoint) {\n        throw new Error(\"Points array cannot be empty\")\n    }\n\n    if (points.length === 1) {\n        // Single point - return its value if time matches\n        return time === firstPoint.time ? firstPoint.value : undefined\n    }\n\n    // Find the segment containing this time\n    const segment = findSegment(time, points)\n\n    if (!segment) {\n        return undefined\n    }\n\n    const [p0, p1] = segment\n\n    // Handle edge case where p0.time === p1.time (degenerate segment)\n    if (p0.time === p1.time) {\n        return p0.value\n    }\n\n    // Normalise time to [0, 1] within the segment\n    const t = (time - p0.time) / (p1.time - p0.time)\n\n    return hermiteInterpolation(p0, p1, t)\n}\n\n/**\n * Evaluates a cubic Hermite spline curve at a given time with clamping.\n * If time is before the first point, returns the first value.\n * If time is after the last point, returns the last value.\n *\n * @param time - The time value to evaluate at.\n * @param points - Array of curve points sorted by time in ascending order.\n * @returns The interpolated or clamped curve value.\n *\n * @example\n * const points: CurvePoint[] = [\n *   { time: 0, value: 0, tangentIn: 0, tangentOut: 1 },\n *   { time: 1, value: 1, tangentIn: 1, tangentOut: 0 }\n * ]\n * getCurveValueClamped(-0.5, points) // Returns 0 (clamped to first point)\n * getCurveValueClamped(1.5, points)  // Returns 1 (clamped to last point)\n */\nexport const getCurveValueClamped = (time: number, points: CurvePoint[]): number => {\n    if (points.length === 0) {\n        throw new Error(\"Points array cannot be empty\")\n    }\n\n    const firstPoint = points[0]\n    if (!firstPoint) {\n        throw new Error(\"Points array cannot be empty\")\n    }\n\n    if (points.length === 1) {\n        return firstPoint.value\n    }\n\n    // Clamp to first point\n    if (time <= firstPoint.time) {\n        return firstPoint.value\n    }\n\n    // Clamp to last point\n    const lastPoint = points.at(-1)\n    if (!lastPoint) {\n        throw new Error(\"Points array cannot be empty\")\n    }\n\n    if (time >= lastPoint.time) {\n        return lastPoint.value\n    }\n\n    // Normal interpolation\n    return getCurveValue(time, points) ?? lastPoint.value\n}\n","/**\n * Calculates the largest power of 2 that is less than or equal to the given number.\n *\n * @param value - The input number (must be positive).\n * @returns The largest power of 2 ≤ value.\n * @throws {Error} If value is not a positive number.\n *\n * @example\n * nearestPow2(100) // 64 (2^6)\n * nearestPow2(64)  // 64 (2^6)\n * nearestPow2(65)  // 64 (2^6)\n * nearestPow2(7)   // 4 (2^2)\n */\nexport const nearestPow2 = (value: number): number => {\n    if (value <= 0 || !Number.isFinite(value)) {\n        throw new Error(\"Value must be a positive finite number\")\n    }\n\n    // Using bit manipulation for efficiency\n    // This approach: floor the log2, then raise 2 to that power\n    return 2 ** Math.floor(Math.log2(value))\n}\n\n/**\n * Calculates the smallest power of 2 that is greater than or equal to the given number.\n *\n * @param value - The input number (must be positive).\n * @returns The smallest power of 2 ≥ value.\n * @throws {Error} If value is not a positive number.\n *\n * @example\n * nextPow2(100) // 128 (2^7)\n * nextPow2(64)  // 64 (2^6)\n * nextPow2(65)  // 128 (2^7)\n */\nexport const nextPow2 = (value: number): number => {\n    if (value <= 0 || !Number.isFinite(value)) {\n        throw new Error(\"Value must be a positive finite number\")\n    }\n\n    return 2 ** Math.ceil(Math.log2(value))\n}\n","/**\n * Sort argument type.\n * keyof T for ascending, `-${string & keyof T}` for descending.\n */\nexport type SortArgument<T> = `-${keyof T & string}` | keyof T\n\n/**\n * Parses a SortArgument string to extract the property key and sort direction.\n */\nconst parseSortArgument = <T extends object>(property: SortArgument<T>): { desc: boolean; key: keyof T } => {\n    const propertyString = String(property)\n    const desc = propertyString.startsWith(\"-\")\n    const key = (desc ? propertyString.slice(1) : propertyString) as keyof T\n    return { desc, key }\n}\n\n/**\n * Locale-aware string comparison with numeric sorting.\n * Note: 'base' sensitivity ignores case and accents, which is often desirable for data sorting.\n */\nconst compareStrings = (a: string, b: string): number =>\n    a.localeCompare(b, undefined, { numeric: true, sensitivity: \"base\" })\n\n/**\n * Check if a value is nullish (null or undefined).\n */\nconst isNullish = (value: unknown): value is null | undefined => value == undefined\n\n/**\n * Compare two values with nullish handling.\n * Returns 0 if both are nullish, 1 if only a is nullish, -1 if only b is nullish, undefined otherwise.\n */\nconst compareNullish = (a: unknown, b: unknown): number | undefined => {\n    const aIsNullish = isNullish(a)\n    const bIsNullish = isNullish(b)\n\n    if (aIsNullish && bIsNullish) return 0\n    if (aIsNullish) return 1\n    if (bIsNullish) return -1\n    return undefined\n}\n\n/**\n * Compare two values with explicit null/undefined handling and type coercion.\n * - null/undefined are treated as equal to each other, but greater than all non-null/undefined values (pushing them to the end).\n * - Tries numeric comparison first if both are numbers/convertible to numbers.\n * - Falls back to string comparison using localeCompare.\n */\nconst compareValues = (a: unknown, b: unknown): number => {\n    // 1. Quick equality check\n    if (a === b) return 0\n\n    // 2. Null/undefined handling (pushes them to the end)\n    const nullishResult = compareNullish(a, b)\n    if (nullishResult !== undefined) return nullishResult\n\n    // 3. Try number comparison\n    const numberA = Number(a)\n    const numberB = Number(b)\n\n    if (Number.isFinite(numberA) && Number.isFinite(numberB)) {\n        return numberA - numberB\n    }\n\n    // 4. Fallback to string comparison\n    if (typeof a === \"string\" && typeof b === \"string\") {\n        return compareStrings(a, b)\n    }\n\n    // 5. Different types or both objects - treat as equal\n    return 0\n}\n\n/**\n * Sort by a list of properties (in left-to-right order)\n * Properties prefixed with '-' are sorted in descending order\n * @example sortBy(['name', '-age']) // Sort by name ascending, then age descending\n */\nexport const sortBy =\n    <T extends object>(propertyNames: SortArgument<T>[]) =>\n    (a: T, b: T): number => {\n        for (const property of propertyNames) {\n            const { desc, key } = parseSortArgument(property)\n            const result = compareValues(a[key], b[key])\n\n            if (result !== 0) {\n                return desc ? -result : result\n            }\n        }\n        return 0\n    }\n\n/**\n * Simple number comparison with null/undefined handling (pushes nullish values to the end).\n */\nexport function simpleNumberSort(a: number, b: number): number\nexport function simpleNumberSort(a: null | number | undefined, b: null | number | undefined): number\nexport function simpleNumberSort(a: null | number | undefined, b: null | number | undefined): number {\n    const nullishResult = compareNullish(a, b)\n    if (nullishResult !== undefined) return nullishResult\n\n    // After compareNullish returns undefined, both a and b are guaranteed to be numbers\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    return a! - b!\n}\n\n/**\n * Simple string comparison with null/undefined handling (pushes nullish values to the end).\n */\nexport function simpleStringSort(a: string, b: string): number\nexport function simpleStringSort(a: null | string | undefined, b: null | string | undefined): number\nexport function simpleStringSort(a: null | string | undefined, b: null | string | undefined): number {\n    const nullishResult = compareNullish(a, b)\n    if (nullishResult !== undefined) return nullishResult\n\n    // After compareNullish returns undefined, both a and b are guaranteed to be strings\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    return compareStrings(a!, b!)\n}\n","/**\n * Generates an SVG path string for a circle.\n * Uses arc commands to draw two semicircles.\n *\n * @param x - Center x-coordinate.\n * @param y - Center y-coordinate.\n * @param r - Radius.\n * @returns SVG path data string.\n *\n * @example\n * <path d={drawSvgCircle(50, 50, 20)} />\n * // Draws a circle centered at (50, 50) with radius 20\n */\nexport const drawSvgCircle = (x: number, y: number, r: number): string => {\n    // Move to leftmost point, draw two 180° arcs to complete the circle\n    // Format: M(x,y) a(rx,ry) rotation large-arc-flag sweep-flag (dx,dy)\n    return `M${x - r},${y}a${r},${r} 0 1,0 ${r * 2},0a${r},${r} 0 1,0 ${-r * 2},0`\n}\n\n/**\n * Generates an SVG path string for a rectangle.\n * The rectangle is centered at (x, y).\n *\n * @param x - Center x-coordinate.\n * @param y - Center y-coordinate.\n * @param size - Width and height of the rectangle.\n * @returns SVG path data string.\n *\n * @example\n * <path d={drawSvgRect(50, 50, 30)} />\n * // Draws a 30×30 square centered at (50, 50)\n */\nexport const drawSvgRect = (x: number, y: number, size: number): string => {\n    const halfSize = size / 2\n    // Move to top-left, draw horizontal, vertical, horizontal back, close path\n    return `M${x - halfSize},${y - halfSize}h${size}v${size}h${-size}z`\n}\n\n/**\n * Generates an SVG path string for a rectangle with separate width and height.\n * The rectangle is centered at (x, y).\n *\n * @param x - Center x-coordinate.\n * @param y - Center y-coordinate.\n * @param width - Rectangle width.\n * @param height - Rectangle height.\n * @returns SVG path data string.\n *\n * @example\n * <path d={drawSvgRectWH(50, 50, 40, 20)} />\n * // Draws a 40×20 rectangle centered at (50, 50)\n */\nexport const drawSvgRectWH = (x: number, y: number, width: number, height: number): string => {\n    const halfWidth = width / 2\n    const halfHeight = height / 2\n    return `M${x - halfWidth},${y - halfHeight}h${width}v${height}h${-width}z`\n}\n\n/**\n * Generates an SVG path string for a vertical line.\n *\n * @param x - Starting x-coordinate.\n * @param y - Starting y-coordinate.\n * @param length - Length of the line (positive = down, negative = up).\n * @returns SVG path data string.\n *\n * @example\n * <path d={drawSvgVLine(50, 20, 60)} />\n * // Draws a vertical line from (50, 20) downward 60 units\n */\nexport const drawSvgVLine = (x: number, y: number, length: number): string => {\n    return `M${x},${y}v${length}`\n}\n\n/**\n * Generates an SVG path string for a horizontal line.\n *\n * @param x - Starting x-coordinate.\n * @param y - Starting y-coordinate.\n * @param length - Length of the line (positive = right, negative = left).\n * @returns SVG path data string.\n *\n * @example\n * <path d={drawSvgHLine(20, 50, 60)} />\n * // Draws a horizontal line from (20, 50) rightward 60 units\n */\nexport const drawSvgHLine = (x: number, y: number, length: number): string => {\n    return `M${x},${y}h${length}`\n}\n\n/**\n * Generates an SVG path string for a line between two points.\n *\n * @param x1 - Starting x-coordinate.\n * @param y1 - Starting y-coordinate.\n * @param x2 - Ending x-coordinate.\n * @param y2 - Ending y-coordinate.\n * @returns SVG path data string.\n *\n * @example\n * <path d={drawSvgLine(10, 10, 90, 90)} />\n * // Draws a line from (10, 10) to (90, 90)\n */\nexport const drawSvgLine = (x1: number, y1: number, x2: number, y2: number): string => {\n    return `M${x1},${y1}L${x2},${y2}`\n}\n","import SVGPathCommander from \"svg-path-commander\"\n\nexport const optimisePath = (path: string): string => new SVGPathCommander(path, { round: 2 }).optimize().toString()\n"],"mappings":"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"}