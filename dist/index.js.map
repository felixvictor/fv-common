{"version":3,"file":"index.js","names":["#colour","#backgroundY","#baseHue","#maxChroma","#maxScaleNumber","#minChroma","#normalizeScaleNumber","#computeScaleLightness","#computeScaleHue","#computeScaleChroma","#baseTint","#onDark","#onLight","#baseColour","localeChangeCallbacks: (() => void)[]"],"sources":["../src/common.ts","../src/colour/colour-math.ts","../src/colour/hsl-colour.ts","../src/colour/colour-at-scale.ts","../src/colour/colour-utility.ts","../src/locale.ts","../src/date.ts","../src/delay.ts","../src/format/cardinal.ts","../src/unicode.ts","../src/format/helpers.ts","../src/format/intl.ts","../src/format/number.ts","../src/format/ordinal.ts","../src/format/percent.ts","../src/format/text.ts","../src/html.ts","../src/sort.ts","../src/svg/draw.ts","../src/svg/optimise.ts"],"sourcesContent":["export const clamp = (x: number | string, min: number | string, max: number | string): number => {\n    let lower = Number(min)\n    let upper = Number(max)\n    const value = Number(x)\n\n    if (Number.isNaN(value) || Number.isNaN(lower) || Number.isNaN(upper)) {\n        return Number.NaN\n    }\n\n    if (lower > upper) {\n        ;[lower, upper] = [upper, lower]\n    }\n    return Math.min(Math.max(value, lower), upper)\n}\n","export class ColourMath {\n    static readonly backgroundLightnessThreshold = 0.18\n    static readonly chromaCurveFactor = 4\n    static readonly cieExponent = 1 / 3\n\n    static readonly cieMultiplierHigh = 116\n    static readonly cieMultiplierLow = 903.296_296_2\n    static readonly cieOffset = 16\n    // CIE lightness conversion thresholds\n    static readonly cieThreshold = 0.008_856_451_6\n    // Scale computation constants\n    static readonly hueShiftFactor = 5\n\n    static readonly lightnessContrastExponent = 3.04\n    static readonly lightnessContrastOffset = 0.05\n    static readonly lightnessMax = 1\n    static readonly lightnessMin = 0\n    // Normalization constants\n    static readonly lightnessScaleFactor = 100\n\n    // Toe function coefficients for perceptual lightness adjustment\n    static readonly toeK1 = 0.206\n    static readonly toeK2 = 0.03\n    static readonly toeK3 = (1 + ColourMath.toeK1) / (1 + ColourMath.toeK2)\n\n    static applyToeCurve(lightness: number): number {\n        const term = ColourMath.toeK3 * lightness - ColourMath.toeK1\n        return 0.5 * (term + Math.sqrt(term * term + 4 * ColourMath.toeK2 * ColourMath.toeK3 * lightness))\n    }\n\n    static yToLightness(y: number): number {\n        return y <= ColourMath.cieThreshold\n            ? y * ColourMath.cieMultiplierLow\n            : ColourMath.cieMultiplierHigh * Math.pow(y, ColourMath.cieExponent) - ColourMath.cieOffset\n    }\n}\n","import Color, { type Coords } from \"colorjs.io\"\n\nimport { clamp } from \"../common.js\"\n\nexport class HslColour {\n    static readonly colorSpace = \"okhsl\"\n    static readonly hexFormat = \"hex\"\n    static readonly hueMax = 360\n    static readonly hueMin = 0\n    static readonly lightnessMax = 100\n    static readonly lightnessMin = 0\n    static readonly outputColorSpace = \"srgb\"\n    static readonly saturationMax = 100\n    static readonly saturationMin = 0\n\n    get colourObject(): Color {\n        return this.#colour\n    }\n\n    get h(): number {\n        return (this.#colour.h as number | undefined) ?? HslColour.hueMin\n    }\n\n    set h(value: number | string) {\n        const h = Number(value)\n        if (Number.isNaN(h)) {\n            console.warn(\n                `${HslColour.name}: Cannot set hue to invalid value \"${value}\" (${h}), ` +\n                    `keeping current value \"${this.#colour.h}\"`,\n            )\n            return\n        }\n        this.#colour.h = ((h % HslColour.hueMax) + HslColour.hueMax) % HslColour.hueMax\n    }\n\n    get hex(): string {\n        return this.#colour.to(HslColour.outputColorSpace).toString({ format: HslColour.hexFormat })\n    }\n\n    get l(): number {\n        return (this.#colour.l as number | undefined) ?? HslColour.lightnessMin\n    }\n\n    set l(value: number | string) {\n        const l = Number(value)\n        if (Number.isNaN(l)) {\n            console.warn(\n                `${HslColour.name}: Cannot set lightness to invalid value \"${value}\" (${l}), ` +\n                    `keeping current value \"${this.#colour.l}\"`,\n            )\n            return\n        }\n        this.#colour.l = clamp(l, HslColour.lightnessMin, HslColour.lightnessMax)\n    }\n\n    get s(): number {\n        return (this.#colour.s as number | undefined) ?? HslColour.saturationMin\n    }\n\n    set s(value: number | string) {\n        const s = Number(value)\n        if (Number.isNaN(s)) {\n            console.warn(\n                `${HslColour.name}: Cannot set saturation to invalid value \"${value}\" (${s}), ` +\n                    `keeping current value \"${this.#colour.s}\"`,\n            )\n            return\n        }\n        this.#colour.s = clamp(s, HslColour.saturationMin, HslColour.saturationMax)\n    }\n\n    readonly #colour: Color\n\n    constructor(argument: Color | Coords | string) {\n        if (typeof argument === \"string\") {\n            this.#colour = new Color(argument).to(HslColour.colorSpace)\n        } else if (argument instanceof Color) {\n            this.#colour = new Color(argument).to(HslColour.colorSpace)\n        } else {\n            this.#colour = new Color({ coords: argument, space: HslColour.colorSpace })\n        }\n    }\n\n    static mix(color1: HslColour, color2: HslColour, weight: number): HslColour {\n        const mix = Color.mix(color1.colourObject, color2.colourObject, weight, {\n            outputSpace: HslColour.colorSpace,\n            space: HslColour.colorSpace,\n        })\n        return new HslColour(mix)\n    }\n\n    clone(): HslColour {\n        return new HslColour(this.#colour)\n    }\n\n    toString(): string {\n        return this.hex\n    }\n}\n","import type { Coords } from \"colorjs.io\"\n\nimport { clamp } from \"../common.js\"\nimport { ColourMath } from \"./colour-math.js\"\nimport { HslColour } from \"./hsl-colour.js\"\n\n/**\n * {@link https://matthewstrom.com/writing/generating-color-palettes/}\n *\n * Utility class for perceptually-designed HSL color scale generation.\n * Based on Matthew Ström's color palette generation algorithm.\n */\n\nexport class ColourScaleGenerator {\n    readonly #backgroundY: number\n    readonly #baseHue: number\n    readonly #maxChroma: number\n    readonly #maxScaleNumber: number\n    readonly #minChroma: number\n\n    constructor(maxScaleNumber: number, baseHue: number, minChroma: number, maxChroma: number, backgroundY: number) {\n        this.#maxScaleNumber = maxScaleNumber\n        this.#baseHue = baseHue\n        this.#minChroma = minChroma\n        this.#maxChroma = maxChroma\n        this.#backgroundY = backgroundY\n    }\n\n    computeColour(scaleNumber: number): HslColour {\n        const scaleValue = this.#normalizeScaleNumber(scaleNumber)\n\n        const rawLightness = this.#computeScaleLightness(scaleValue)\n        const normalizedLightness = clamp(\n            rawLightness / ColourMath.lightnessScaleFactor,\n            ColourMath.lightnessMin,\n            ColourMath.lightnessMax,\n        )\n\n        const hue = this.#computeScaleHue(scaleValue)\n        const chroma = this.#computeScaleChroma(scaleValue)\n\n        const coords: Coords = [hue, chroma, normalizedLightness]\n        return new HslColour(coords)\n    }\n\n    #computeScaleChroma(scaleValue: number): number {\n        const chromaDifference = this.#maxChroma - this.#minChroma\n        const parabolaFactor = -ColourMath.chromaCurveFactor * chromaDifference\n        const linearFactor = ColourMath.chromaCurveFactor * chromaDifference\n\n        return parabolaFactor * Math.pow(scaleValue, 2) + linearFactor * scaleValue + this.#minChroma\n    }\n\n    #computeScaleHue(scaleValue: number): number {\n        return this.#baseHue + ColourMath.hueShiftFactor * (1 - scaleValue)\n    }\n\n    #computeScaleLightness(scaleValue: number): number {\n        const exponentialTerm = Math.exp(ColourMath.lightnessContrastExponent * scaleValue)\n        const adjustedBackground = this.#backgroundY + ColourMath.lightnessContrastOffset\n\n        const foregroundY =\n            this.#backgroundY > ColourMath.backgroundLightnessThreshold\n                ? adjustedBackground / exponentialTerm - ColourMath.lightnessContrastOffset\n                : exponentialTerm * adjustedBackground - ColourMath.lightnessContrastOffset\n\n        return ColourMath.applyToeCurve(ColourMath.yToLightness(foregroundY))\n    }\n\n    #normalizeScaleNumber(scaleNumber: number): number {\n        return scaleNumber / this.#maxScaleNumber\n    }\n}\n","import { ColourScaleGenerator } from \"./colour-at-scale.js\"\nimport { HslColour } from \"./hsl-colour.js\"\n\nexport class ColourUtility {\n    static readonly defaultBaseTint = 40\n    static readonly defaultHarmonizationMix = 80\n    static readonly fallbackHue = 0\n    static readonly fallbackLightness = 0\n    static readonly fallbackSaturation = 1\n    static readonly maxSaturation = 0.25\n    static readonly maxSaturationNeutral = 0.2\n    static readonly maxTone = 100\n    static readonly minSaturation = 0\n    static readonly neutralHarmonizationMix = 0\n    static readonly onDarkBase = \"#fff\"\n    static readonly onDarkMixAmount = 5\n    static readonly onLightBase = \"#000\"\n    static readonly onLightMixAmount = 40\n    static readonly percentageScale = 100\n\n    get baseTint() {\n        return this.#baseTint\n    }\n    get onDark() {\n        return this.#onDark\n    }\n    get onLight() {\n        return this.#onLight\n    }\n    readonly #baseColour: HslColour\n\n    readonly #baseTint: number\n\n    readonly #onDark: HslColour\n\n    readonly #onLight: HslColour\n\n    constructor(baseColourHex: string, baseTint = ColourUtility.defaultBaseTint) {\n        this.#baseColour = new HslColour(baseColourHex)\n        this.#baseTint = baseTint\n        this.#onDark = this.colourMixin(new HslColour(ColourUtility.onDarkBase), ColourUtility.onDarkMixAmount)\n        this.#onLight = this.colourMixin(new HslColour(ColourUtility.onLightBase), ColourUtility.onLightMixAmount)\n    }\n\n    colourMixin(mixColour: HslColour | string, mixAmount = ColourUtility.defaultHarmonizationMix) {\n        const targetColour = typeof mixColour === \"string\" ? new HslColour(mixColour) : mixColour\n        const harmonizedBase = new HslColour([targetColour.h, this.#baseColour.s, this.#baseColour.l])\n        return this.mixColours(harmonizedBase, targetColour, ColourUtility.percentageScale - mixAmount)\n    }\n\n    getBaseTintedColour(colourHex: string) {\n        return this.getTint(new HslColour(colourHex), this.#baseTint)\n    }\n\n    getColourAtTint(tone: number, colour: HslColour, background: HslColour, neutral = false) {\n        const invertedTone = ColourUtility.maxTone - tone\n        const hue = colour.h\n        const saturation = colour.s\n        const maxSaturation = neutral\n            ? ColourUtility.maxSaturationNeutral\n            : Math.max(ColourUtility.maxSaturation, saturation)\n        const backgroundLightness = background.l\n        const invertedBackgroundLightness = 1 - backgroundLightness\n\n        const generator = new ColourScaleGenerator(\n            ColourUtility.maxTone,\n            hue,\n            ColourUtility.minSaturation,\n            maxSaturation,\n            invertedBackgroundLightness,\n        )\n        return generator.computeColour(invertedTone)\n    }\n\n    getHarmonisedColour(colourHex: string, mixAmount?: number) {\n        const harmonized = this.colourMixin(new HslColour(colourHex), mixAmount)\n        return this.getTint(harmonized, this.#baseTint)\n    }\n\n    getHarmonisedColourNeutral(colourHex: string) {\n        const harmonized = this.colourMixin(new HslColour(colourHex), ColourUtility.neutralHarmonizationMix)\n        return this.getTint(harmonized, this.#baseTint, this.#onLight, true)\n    }\n\n    getTint(colour: HslColour, tone: number, backgroundColour = this.#onLight, neutral = false) {\n        return this.getColourAtTint(tone, colour, backgroundColour, neutral)\n    }\n\n    mixColours(color1: HslColour, color2: HslColour, weightPercentage = this.#baseTint) {\n        const weightScale = weightPercentage / ColourUtility.percentageScale\n        return HslColour.mix(color1, color2, weightScale)\n    }\n}\n","let currentLocale = \"en-GB\"\nconst localeChangeCallbacks: (() => void)[] = []\n\nexport const setLocale = (locale: string): void => {\n    if (currentLocale !== locale) {\n        currentLocale = locale\n        // Notify all registered callbacks\n        for (const callback of localeChangeCallbacks) callback()\n    }\n}\n\nexport const getLocale = (): string => currentLocale\n\n/**\n * Register a callback to be called whenever the locale changes.\n * @param callback - Function to call on locale change\n */\nexport const onLocaleChange = (callback: () => void): void => {\n    localeChangeCallbacks.push(callback)\n}\n","import dayjs from \"dayjs\"\nimport \"dayjs/locale/de\"\nimport \"dayjs/locale/en\"\nimport relativeTime from \"dayjs/plugin/relativeTime\"\n\nimport { getLocale, onLocaleChange, setLocale as setLibraryLocale } from \"./locale.js\"\n\ndayjs.extend(relativeTime)\n\n// Wrapper to sync dayjs locale with library locale\nexport const setDateLocale = (locale: string): void => {\n    setLibraryLocale(locale)\n    dayjs.locale(locale)\n}\n\n// Sync dayjs locale on any locale changes\nonLocaleChange(() => {\n    dayjs.locale(getLocale())\n})\n\n// Initialise with default\nsetDateLocale(\"en-GB\")\n\n/**\n * Formats date with locale-specific formatting.\n * @param date - Date string to format\n * @param locale - Optional locale override\n * @example getFormattedDate('2024-01-15') → \"Montag, 15. Januar, 14.30\" (de)\n * @example getFormattedDate('2024-01-15', 'en') → \"Monday, 15. January, 14.30\"\n */\nexport const getFormattedDate = (date: string, locale?: string): string => {\n    const effectiveLocale = locale ?? getLocale()\n    return dayjs(date).locale(effectiveLocale).format(\"dddd, D. MMMM, H.mm\")\n}\n\n/**\n * Short date format with day, month, and time.\n * @example getFormattedDateShort('2024-01-15') → \"15.1. 14.30\"\n */\nexport const getFormattedDateShort = (date: number | string, locale?: string): string => {\n    const effectiveLocale = locale ?? getLocale()\n    return dayjs(date).locale(effectiveLocale).format(\"D.M. H.mm\")\n}\n\n/**\n * Date format with seconds included.\n * @example getFormattedDateShortSeconds('2024-01-15') → \"15. Januar 14.30.45\"\n */\nexport const getFormattedDateShortSeconds = (date: number | string, locale?: string): string => {\n    const effectiveLocale = locale ?? getLocale()\n    return dayjs(date).locale(effectiveLocale).format(\"D. MMMM H.mm.ss\")\n}\n\n/**\n * Returns relative time string (e.g., \"vor 2 Stunden\" or \"2 hours ago\").\n * Uses currently active locale.\n */\nexport const getDateDistance = (date: string, locale?: string): string => {\n    const effectiveLocale = locale ?? getLocale()\n    return dayjs(date).locale(effectiveLocale).fromNow()\n}\n\n/**\n * Checks if the given date is in the future.\n */\nexport const isFutureDate = (date: Date | string): boolean => {\n    return dayjs().isBefore(date)\n}\n\n/**\n * Finds the index of the date closest to now.\n * @returns Index of closest date, or undefined if array is empty\n */\nexport const closestDateIndex = (datesString: string[]): number | undefined => {\n    if (datesString.length === 0) return undefined\n\n    const now = dayjs()\n    const dateDiffs = datesString.map((date) => Math.abs(now.diff(date)))\n    return dateDiffs.indexOf(Math.min(...dateDiffs))\n}\n","export const delay = async (ms: number): Promise<unknown> => await new Promise((resolve) => setTimeout(resolve, ms))\n","const cardinalRulesCache = new Map<string, Intl.PluralRules>()\n\nexport const getCardinalRules = (locale: string): Intl.PluralRules => {\n    let rules = cardinalRulesCache.get(locale)\n    if (!rules) {\n        rules = new Intl.PluralRules(locale, { type: \"cardinal\" })\n        cardinalRulesCache.set(locale, rules)\n    }\n    return rules\n}\n","export const cDashEm = String.fromCodePoint(0x20_14)\nexport const cDashEn = String.fromCodePoint(0x20_13)\nexport const cDashFigure = String.fromCodePoint(0x20_12)\nexport const cMinus = String.fromCodePoint(0x22_12)\nexport const cPlus = String.fromCodePoint(0x00_2b)\nexport const cPlusSmall = String.fromCodePoint(0xfe_62)\nexport const cSpaceFigure = String.fromCodePoint(0x20_07)\nexport const cSpaceNarrowNoBreaking = String.fromCodePoint(0x20_2f)\nexport const cSpaceNoBreak = String.fromCodePoint(0x00_a0)\nexport const cSpacePunctuation = String.fromCodePoint(0x20_08)\nexport const cSpaceThin = String.fromCodePoint(0x20_09)\nexport const cSpaceZeroWidthBreaking = String.fromCodePoint(0xfe_ff)\nexport const cCombiningDiaeresis = String.fromCodePoint(0x03_08)\n","import { cSpaceThin } from \"../unicode.js\"\n\n/**\n * Adds styled span/tspan wrapper for compact notation suffixes.\n */\nexport const addSpan = (suffix: string, svg: boolean): string =>\n    svg ? `<tspan class=\"caps\">${suffix}</tspan>` : `<span class=\"caps\">${suffix}</span>`\n\n/**\n * Beautifies compact notation suffixes (K, M) with styling and spacing.\n */\nexport const beautifySuffix = (suffix: string, svg: boolean): string =>\n    cSpaceThin + suffix.replace(\"K\", addSpan(\"k\", svg)).replace(\"M\", addSpan(\"m\", svg))\n\nexport const formatUnit = (u: string, svg = false): string => {\n    if (u === u.toLowerCase()) {\n        return u\n    }\n\n    const tag = svg ? \"tspan\" : \"span\"\n\n    if (u.length > 1) {\n        return `<${tag} class=\"caps\">${u}</${tag}>`\n    }\n\n    return `<${tag} style=\"font-variant-caps: all-small-caps\">${u}</${tag}>`\n}\n","import { getLocale } from \"../locale.js\"\nimport { cMinus, cPlus, cSpaceNarrowNoBreaking, cSpaceThin } from \"../unicode.js\"\nimport { beautifySuffix } from \"./helpers.js\"\n\n/**\n * Internal number formatter using Intl.NumberFormat with custom typographic enhancements.\n * Applies thin spaces, proper minus signs, and styled compact notation.\n */\nexport const formatWithIntl = (value: number, options: Intl.NumberFormatOptions, svg = false): string =>\n    new Intl.NumberFormat(getLocale(), options)\n        .formatToParts(value)\n        .map((part) => {\n            switch (part.type) {\n                case \"compact\": {\n                    return beautifySuffix(part.value, svg)\n                }\n\n                case \"currency\": {\n                    return part.value\n                }\n\n                case \"decimal\": {\n                    return part.value\n                }\n\n                case \"fraction\": {\n                    return part.value\n                }\n\n                case \"group\": {\n                    return cSpaceThin\n                }\n\n                case \"integer\": {\n                    return part.value\n                }\n\n                case \"literal\": {\n                    return part.value\n                }\n\n                case \"minusSign\": {\n                    return `${cMinus}${cSpaceNarrowNoBreaking}`\n                }\n\n                case \"percentSign\": {\n                    return `${cSpaceNarrowNoBreaking}%`\n                }\n\n                case \"plusSign\": {\n                    return `${cPlus}${cSpaceNarrowNoBreaking}`\n                }\n\n                case \"unit\": {\n                    return part.value\n                }\n            }\n            return part.value\n        })\n        .join(\"\")\n","import { cSpaceFigure, cSpaceNarrowNoBreaking, cSpacePunctuation } from \"../unicode.js\"\nimport { formatUnit } from \"./helpers.js\"\nimport { formatWithIntl } from \"./intl.js\"\n\n/**\n * Base number formatter with decimal precision.\n */\nconst formatNumber = (value: number, decimals = 2, options: Intl.NumberFormatOptions = {}, svg = false): string => {\n    return formatWithIntl(value, { maximumFractionDigits: decimals, ...options, style: \"decimal\" }, svg)\n}\n\n/**\n * Formats a floating-point number with specified decimal places.\n * @example formatFloat(1234.5678, 2) → \"1 234.57\"\n */\nexport const formatFloat = (value: number, decimals = 2, options: Intl.NumberFormatOptions = {}, svg = false): string =>\n    formatNumber(value, decimals, options, svg)\n\n/**\n * Formats a float with explicit sign (+/-).\n * @example formatSignFloat(42.5, 2) → \"+42.50\"\n * @example formatSignFloat(-42.5, 2) → \"−42.50\"\n */\nexport const formatSignFloat = (value: number, decimals = 2): string => {\n    return formatFloat(value, decimals, { signDisplay: \"always\" })\n}\n\n/**\n * Formats a number with SI compact notation (K, M suffixes).\n * @example formatSiFloat(1234567) → \"1.2 m\" (where m is styled)\n */\nexport const formatSiFloat = (value: number, svg = false): string => {\n    return formatFloat(\n        value,\n        2,\n        {\n            maximumSignificantDigits: 2,\n            notation: \"compact\",\n        },\n        svg,\n    )\n}\n\n/**\n * Formats a float with fixed decimal places, using figure spaces for missing digits.\n * Ensures alignment in tabular data by replacing trailing zeros with figure spaces.\n * @example formatFloatFixed(42, 2) → \"42  \" (with figure spaces)\n * @example formatFloatFixed(42.1, 2) → \"42.1 \" (with one figure space)\n */\nexport const formatFloatFixed = (value: number, decimals = 2): string => {\n    return formatFloat(value, decimals, { minimumFractionDigits: decimals })\n        .replace(/\\.00$/, cSpacePunctuation + cSpaceFigure + cSpaceFigure)\n        .replace(/\\.0$/, cSpacePunctuation + cSpaceFigure)\n        .replaceAll(/\\.(\\d)0$/g, `.$1${cSpaceFigure}`)\n}\n\nexport const formatFloatWithUnit = (x: number, u: string): string =>\n    `${formatSiFloat(x)}${cSpaceNarrowNoBreaking}${formatUnit(u)}`\n\nexport const formatReales = (x: number): string => `${formatUnit(\"R\")}${cSpaceNarrowNoBreaking}${formatSiFloat(x)}`\n\nexport const formatWeight = (x: number): string => formatFloatWithUnit(x, \"t\")\n\n/**\n * Rounds a number to specified decimal places.\n * @example round(3.14159, 2) → 3.14\n */\nexport const round = (value: number, decimals = 0): number => {\n    return Number(formatFloat(value, decimals))\n}\n\n/**\n * Rounds a number to 3 decimal places (thousands precision).\n * @example roundToThousands(3.14159) → 3.142\n */\nexport const roundToThousands = (value: number): number => round(value, 3)\n\n/**\n * Formats an integer (no decimal places).\n * @example formatInt(1234567) → \"1 234 567\"\n */\nexport const formatInt = (value: number, options: Intl.NumberFormatOptions = {}): string => {\n    return formatNumber(value, 0, options)\n}\n\n/**\n * Formats an integer with explicit sign (+/-).\n * @example formatSignInt(42) → \"+42\"\n */\nexport const formatSignInt = (value: number): string => {\n    return formatInt(value, { signDisplay: \"always\" })\n}\n\n/**\n * Format integer\n */\nexport const formatSiInt = (x: number, max = 2, options = {} as Intl.NumberFormatOptions): string =>\n    formatNumber(x, 0, { ...options, maximumSignificantDigits: max })\n","import { getLocale } from \"../locale.js\"\n\nconst ordinalRulesCache = new Map<string, Intl.PluralRules>()\n\nconst getOrdinalRules = (locale: string): Intl.PluralRules => {\n    let rules = ordinalRulesCache.get(locale)\n    if (!rules) {\n        rules = new Intl.PluralRules(locale, { type: \"ordinal\" })\n        ordinalRulesCache.set(locale, rules)\n    }\n    return rules\n}\n\nconst suffixes = new Map([\n    [\"few\", \"rd\"],\n    [\"one\", \"st\"],\n    [\"other\", \"th\"],\n    [\"two\", \"nd\"],\n])\n\nconst suffixesSuper = new Map([\n    [\"few\", \"ʳᵈ\"],\n    [\"one\", \"ˢᵗ\"],\n    [\"other\", \"ᵗʰ\"],\n    [\"two\", \"ⁿᵈ\"],\n])\n\n/**\n * Format ordinal number with appropriate suffix.\n * @param n - Integer\n * @param sup - True if superscript suffixes needed\n * @param locale - Optional locale override\n * @example getOrdinal(1) → \"1ˢᵗ\"\n * @example getOrdinal(2, false) → \"2nd\"\n * @example getOrdinal(3) → \"3ʳᵈ\"\n */\nexport const getOrdinal = (n: number, sup = true, locale?: string): string => {\n    const effectiveLocale = locale ?? getLocale()\n    const ordinalRules = getOrdinalRules(effectiveLocale)\n    const rule = ordinalRules.select(n)\n    const suffix = sup ? suffixesSuper.get(rule) : suffixes.get(rule)\n    return `${n}${suffix ?? \"\"}`\n}\n","import { formatWithIntl } from \"./intl.js\"\n\n/**\n * Formats a decimal value as a percentage.\n * @param value - Decimal value (e.g., 0.42 for 42%)\n * @param decimals - Number of decimal places\n * @example formatPercent(0.4567, 1) → \"45.7 %\"\n */\nexport const formatPercent = (value: number, decimals = 1, options: Intl.NumberFormatOptions = {}): string => {\n    return formatWithIntl(value, {\n        maximumFractionDigits: decimals,\n        ...options,\n        style: \"percent\",\n    })\n}\n\n/**\n * Formats a percentage with explicit sign (+/-).\n * @example formatSignPercent(0.42, 1) → \"+42.0 %\"\n */\nexport const formatSignPercent = (value: number, decimals = 1): string => {\n    return formatPercent(value, decimals, { signDisplay: \"always\" })\n}\n\n/**\n * Format percentage point\n */\nexport const formatPP = (x: number, f = 0): string => formatPercent(x, f).replace(\"%\", \"pp\")\n","import { getLocale } from \"../locale.js\"\nimport { getCardinalRules } from \"./cardinal.js\"\n\n/**\n * Capitalizes the first letter of a string using locale-aware rules.\n * @example capitalizeFirstLetter(\"hello\") → \"Hello\"\n * @example capitalizeFirstLetter(\"istanbul\") → \"İstanbul\" (in Turkish locale)\n */\nexport const capitalizeFirstLetter = (text: string, locale?: string): string => {\n    if (!text) return text\n    const effectiveLocale = locale ?? getLocale()\n    return text.charAt(0).toLocaleUpperCase(effectiveLocale) + text.slice(1)\n}\n\n/**\n * Returns the appropriate singular or plural form based on count.\n * Uses Intl.PluralRules for locale-aware pluralisation.\n * @example pluralise(1, \"item\", \"items\") → \"item\"\n * @example pluralise(5, \"item\", \"items\") → \"items\"\n */\nexport const pluralise = (count: number, wordSingle: string, wordPlural: string): string => {\n    const cardinalRules = getCardinalRules(getLocale())\n    const rule = cardinalRules.select(count)\n    return rule === \"one\" ? wordSingle : wordPlural\n}\n","export const getElementWidth = (element: HTMLElement | SVGElement): number => {\n    const { width } = element.getBoundingClientRect()\n\n    return Math.floor(width)\n}\n","/**\n * Sort argument type.\n * keyof T for ascending, `-${string & keyof T}` for descending.\n */\nexport type SortArgument<T> = `-${keyof T & string}` | keyof T\n\n/**\n * Parses a SortArgument string to extract the property key and sort direction.\n */\nconst parseSortArgument = <T extends object>(property: SortArgument<T>): { desc: boolean; key: keyof T } => {\n    const propertyString = String(property)\n    const desc = propertyString.startsWith(\"-\")\n    const key = (desc ? propertyString.slice(1) : propertyString) as keyof T\n    return { desc, key }\n}\n\n/**\n * Locale-aware string comparison with numeric sorting.\n * Note: 'base' sensitivity ignores case and accents, which is often desirable for data sorting.\n */\nconst compareStrings = (a: string, b: string): number =>\n    a.localeCompare(b, undefined, { numeric: true, sensitivity: \"base\" })\n\n/**\n * Check if a value is nullish (null or undefined).\n */\nconst isNullish = (value: unknown): value is null | undefined => value == undefined\n\n/**\n * Compare two values with nullish handling.\n * Returns 0 if both are nullish, 1 if only a is nullish, -1 if only b is nullish, undefined otherwise.\n */\nconst compareNullish = (a: unknown, b: unknown): number | undefined => {\n    const aIsNullish = isNullish(a)\n    const bIsNullish = isNullish(b)\n\n    if (aIsNullish && bIsNullish) return 0\n    if (aIsNullish) return 1\n    if (bIsNullish) return -1\n    return undefined\n}\n\n/**\n * Compare two values with explicit null/undefined handling and type coercion.\n * - null/undefined are treated as equal to each other, but greater than all non-null/undefined values (pushing them to the end).\n * - Tries numeric comparison first if both are numbers/convertible to numbers.\n * - Falls back to string comparison using localeCompare.\n */\nconst compareValues = (a: unknown, b: unknown): number => {\n    // 1. Quick equality check\n    if (a === b) return 0\n\n    // 2. Null/undefined handling (pushes them to the end)\n    const nullishResult = compareNullish(a, b)\n    if (nullishResult !== undefined) return nullishResult\n\n    // 3. Try number comparison\n    const numberA = Number(a)\n    const numberB = Number(b)\n\n    if (Number.isFinite(numberA) && Number.isFinite(numberB)) {\n        return numberA - numberB\n    }\n\n    // 4. Fallback to string comparison\n    if (typeof a === \"string\" && typeof b === \"string\") {\n        return compareStrings(a, b)\n    }\n\n    // 5. Different types or both objects - treat as equal\n    return 0\n}\n\n/**\n * Sort by a list of properties (in left-to-right order)\n * Properties prefixed with '-' are sorted in descending order\n * @example sortBy(['name', '-age']) // Sort by name ascending, then age descending\n */\nexport const sortBy =\n    <T extends object>(propertyNames: SortArgument<T>[]) =>\n    (a: T, b: T): number => {\n        for (const property of propertyNames) {\n            const { desc, key } = parseSortArgument(property)\n            const result = compareValues(a[key], b[key])\n\n            if (result !== 0) {\n                return desc ? -result : result\n            }\n        }\n        return 0\n    }\n\n/**\n * Simple number comparison with null/undefined handling (pushes nullish values to the end).\n */\nexport function simpleNumberSort(a: number, b: number): number\nexport function simpleNumberSort(a: null | number | undefined, b: null | number | undefined): number\nexport function simpleNumberSort(a: null | number | undefined, b: null | number | undefined): number {\n    const nullishResult = compareNullish(a, b)\n    if (nullishResult !== undefined) return nullishResult\n\n    // After compareNullish returns undefined, both a and b are guaranteed to be numbers\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    return a! - b!\n}\n\n/**\n * Simple string comparison with null/undefined handling (pushes nullish values to the end).\n */\nexport function simpleStringSort(a: string, b: string): number\nexport function simpleStringSort(a: null | string | undefined, b: null | string | undefined): number\nexport function simpleStringSort(a: null | string | undefined, b: null | string | undefined): number {\n    const nullishResult = compareNullish(a, b)\n    if (nullishResult !== undefined) return nullishResult\n\n    // After compareNullish returns undefined, both a and b are guaranteed to be strings\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    return compareStrings(a!, b!)\n}\n","export const drawSvgRect = (x: number, y: number, h: number, w: number): string => `M${x},${y}h${w}v${h}h${-w}`\nexport const drawSvgLine = (x1: number, y1: number, x2: number, y2: number): string => `M${x1},${y1}L${x2},${y2}`\nexport const drawSvgVLine = (x: number, y: number, l: number): string => `M${x},${y}v${l}`\nexport const drawSvgHLine = (x: number, y: number, l: number): string => `M${x},${y}h${l}`\n","import SVGPathCommander from \"svg-path-commander\"\n\nexport const optimisePath = (path: string): string => new SVGPathCommander(path, { round: 2 }).optimize().toString()\n"],"mappings":"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"}