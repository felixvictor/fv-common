import{exec as e,execSync as t}from"node:child_process";import{promisify as n}from"node:util";import r from"node:fs";import i from"node:fs/promises";import{readFileSync as a,writeFile as o,writeFileSync as s}from"atomically";import c from"node:path";const l={fileNotFound:`ENOENT`},u=e=>{let t=e instanceof Error?e.message:String(e);console.error(`Request failed -->`,t)},d=e=>e instanceof Error&&`code`in e,f=n(e),p=(e,n)=>{try{return t(e,n)}catch(t){return d(t)?t.code===`ENOENT`?(console.error(`Command not found:`,e),console.error(`Error details:`,t.message)):(console.error(`Command execution failed:`,e),console.error(`Error code:`,t.code),console.error(`Error details:`,t.message)):u(String(t)),Buffer.from(``)}},m=(e,n)=>{try{return{output:t(e,n),success:!0}}catch(t){let n=t instanceof Error?t:Error(String(t));return d(t)&&(t.code===`ENOENT`?console.error(`Command not found:`,e):(console.error(`Command execution failed:`,e),console.error(`Error code:`,t.code))),{error:n,output:void 0,success:!1}}},h=(e,t)=>p(e,t).toString().trim(),g=e=>{try{return t(`${process.platform===`win32`?`where`:`which`} ${e}`,{stdio:`ignore`}),!0}catch{return!1}},_=async(e,t)=>{try{let{stdout:n}=await f(e,t);return n.trim()}catch(t){return d(t)?t.code===`ENOENT`?(console.error(`Command not found:`,e),console.error(`Error details:`,t.message)):(console.error(`Command execution failed:`,e),console.error(`Error code:`,t.code),console.error(`Error details:`,t.message)):u(String(t)),``}},v=async(e,t)=>{try{let{stderr:n,stdout:r}=await f(e,t);return{stderr:n.trim(),stdout:r.trim(),success:!0}}catch(t){let n=t instanceof Error?t:Error(String(t)),r=``,i=``;return t&&typeof t==`object`&&`stdout`in t&&`stderr`in t&&(r=String(t.stdout||``),i=String(t.stderr||``)),d(t)&&(t.code===`ENOENT`?console.error(`Command not found:`,e):(console.error(`Command execution failed:`,e),console.error(`Error code:`,t.code))),{error:n,stderr:i.trim(),stdout:r.trim(),success:!1}}},y=async e=>{try{return await f(`${process.platform===`win32`?`where`:`which`} ${e}`,{stdio:`ignore`}),!0}catch{return!1}},b=e=>{try{r.mkdirSync(e,{recursive:!0})}catch(t){u(`Cannot make directory ${e}\nError: ${String(t)}`)}},x=async e=>{try{await i.mkdir(e,{recursive:!0})}catch(t){u(`Cannot make directory ${e}\nError: ${String(t)}`)}},S=e=>r.readdirSync(e,{recursive:!0}),C=e=>{r.rmSync(e,{force:!0,recursive:!0})},w=`utf8`,T=async(e,t)=>{try{await o(e,t,{encoding:w})}catch(t){u(`Cannot save ${e} (atomically.writeFile)\nError: ${String(t)}`)}},E=(e,t)=>{try{s(e,t,{encoding:w})}catch(t){u(`Cannot save ${e} (atomically.writeFileSync)\nError: ${String(t)}`)}},D=async(e,t)=>{await T(e,JSON.stringify(t))},O=(e,t)=>{E(e,JSON.stringify(t))},k=(e,t)=>{try{s(e,t)}catch(t){u(`Cannot save ${e} (saveBinaryFile)\nError: ${String(t)}`)}},A=(e,t)=>{k(e,t)},j=e=>{try{return a(e,{encoding:w})}catch(t){d(t)&&t.code===l.fileNotFound?u(`File ${e} not found`):u(t);return}},M=e=>{try{let t=j(e);return t===void 0?void 0:JSON.parse(t)}catch(e){u(e);return}},N=async e=>{try{return await i.readFile(e,{encoding:w})}catch(t){d(t)&&t.code===l.fileNotFound?u(`File ${e} not found`):u(t);return}},P={force:!0,throwIfNoEntry:!1},F=e=>{r.rmSync(e,{force:P.force})},I=async e=>{try{await i.rm(e,{force:P.force})}catch(e){u(e)}},L=e=>{try{return r.statSync(e).isFile()}catch{return!1}},R=e=>r.statSync(e,{throwIfNoEntry:P.throwIfNoEntry})?.size===0,z=async e=>{try{return(await i.stat(e)).isFile()}catch{return!1}},B=(e,t)=>{let n=c.parse(e);return c.format({dir:n.dir,ext:t.startsWith(`.`)?t:`.${t}`,name:n.name})},V=(e,t)=>{let n=c.parse(e);return c.format({dir:n.dir,ext:n.ext,name:n.name+t})},H=(e,t)=>{let n=c.parse(e);return c.format({dir:n.dir,ext:n.ext,name:t})};export{V as appendToFileName,B as changeExtension,H as changeFileName,g as commandExists,y as commandExistsAsync,l as errorCodes,p as executeCommand,_ as executeCommandAsync,v as executeCommandAsyncWithResult,h as executeCommandString,m as executeCommandWithResult,R as fileEmpty,L as fileExists,z as fileExistsAsync,d as isNodeError,x as makeDirectoryAsync,b as makeDirectorySync,u as putError,S as readDirectorySync,M as readJsonSync,N as readTextFileAsync,j as readTextFileSync,C as removeDirectorySync,I as removeFileAsync,F as removeFileSync,k as saveBinaryFile,A as saveImage,O as saveJson,D as saveJsonAsync,T as saveTextFileAsync,E as saveTextFileSync};
//# sourceMappingURL=node.mjs.map